{"version":3,"file":"WebGLRenderer-2b2sGpQA.js","sources":["../../node_modules/pixi.js/lib/utils/browser/isSafari.mjs","../../node_modules/pixi.js/lib/rendering/batcher/gl/GlBatchAdaptor.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBuffer.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBufferSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/context/GlContextSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/geometry/GlGeometrySystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlBackBufferSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlColorMaskSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlEncoderSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlLimitsSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlRenderTarget.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlStencilSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/GlUboSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgramData.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/compileShader.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/defaultValue.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/mapType.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUboData.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUniformData.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/logProgramError.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/generateProgram.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlShaderSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSync.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlUniformGroupSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/state/GlStateSystem.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTexture.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadCubeTextureResource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/applyStyleParams.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapViewDimensionToGlTarget.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTextureSystem.mjs","../../node_modules/pixi.js/lib/scene/graphics/gl/GlGraphicsAdaptor.mjs","../../node_modules/pixi.js/lib/scene/mesh/gl/GlMeshAdaptor.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/WebGLRenderer.mjs"],"sourcesContent":["import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nfunction isSafari() {\n  const { userAgent } = DOMAdapter.get().getNavigator();\n  return /^((?!chrome|android).)*safari/i.test(userAgent);\n}\n\nexport { isSafari };\n//# sourceMappingURL=isSafari.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\n\n\"use strict\";\nclass GlBatchAdaptor {\n  constructor() {\n    this._tempState = State.for2d();\n    /**\n     * We only want to sync the a batched shaders uniforms once on first use\n     * this is a hash of shader uids to a boolean value.  When the shader is first bound\n     * we set the value to true.  When the shader is bound again we check the value and\n     * if it is true we know that the uniforms have already been synced and we skip it.\n     */\n    this._didUploadHash = {};\n  }\n  init(batcherPipe) {\n    batcherPipe.renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._didUploadHash = {};\n  }\n  start(batchPipe, geometry, shader) {\n    const renderer = batchPipe.renderer;\n    const didUpload = this._didUploadHash[shader.uid];\n    renderer.shader.bind(shader, didUpload);\n    if (!didUpload) {\n      this._didUploadHash[shader.uid] = true;\n    }\n    renderer.shader.updateUniformGroup(renderer.globalUniforms.uniformGroup);\n    renderer.geometry.bind(geometry, shader.glProgram);\n  }\n  execute(batchPipe, batch) {\n    const renderer = batchPipe.renderer;\n    this._tempState.blendMode = batch.blendMode;\n    renderer.state.set(this._tempState);\n    const textures = batch.textures.textures;\n    for (let i = 0; i < batch.textures.count; i++) {\n      renderer.texture.bind(textures[i], i);\n    }\n    renderer.geometry.draw(batch.topology, batch.size, batch.start);\n  }\n}\n/** @ignore */\nGlBatchAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"batch\"\n};\n\nexport { GlBatchAdaptor };\n//# sourceMappingURL=GlBatchAdaptor.mjs.map\n","\"use strict\";\nvar BUFFER_TYPE = /* @__PURE__ */ ((BUFFER_TYPE2) => {\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"UNIFORM_BUFFER\"] = 35345] = \"UNIFORM_BUFFER\";\n  return BUFFER_TYPE2;\n})(BUFFER_TYPE || {});\n\nexport { BUFFER_TYPE };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass GlBuffer {\n  constructor(buffer, type) {\n    this._lastBindBaseLocation = -1;\n    this._lastBindCallId = -1;\n    this.buffer = buffer || null;\n    this.updateID = -1;\n    this.byteLength = -1;\n    this.type = type;\n  }\n  destroy() {\n    this.buffer = null;\n    this.updateID = -1;\n    this.byteLength = -1;\n    this.type = -1;\n    this._lastBindBaseLocation = -1;\n    this._lastBindCallId = -1;\n  }\n}\n\nexport { GlBuffer };\n//# sourceMappingURL=GlBuffer.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash.mjs';\nimport { BufferUsage } from '../../shared/buffer/const.mjs';\nimport { BUFFER_TYPE } from './const.mjs';\nimport { GlBuffer } from './GlBuffer.mjs';\n\n\"use strict\";\nclass GlBufferSystem {\n  /**\n   * @param {Renderer} renderer - The renderer this System works for.\n   */\n  constructor(renderer) {\n    /** Cache keeping track of the base bound buffer bases */\n    this._boundBufferBases = /* @__PURE__ */ Object.create(null);\n    this._minBaseLocation = 0;\n    this._nextBindBaseIndex = this._minBaseLocation;\n    this._bindCallId = 0;\n    this._renderer = renderer;\n    this._managedBuffers = new GCManagedHash({\n      renderer,\n      type: \"resource\",\n      onUnload: this.onBufferUnload.bind(this),\n      name: \"glBuffer\"\n    });\n  }\n  /** @ignore */\n  destroy() {\n    this._managedBuffers.destroy();\n    this._renderer = null;\n    this._gl = null;\n    this._boundBufferBases = {};\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    this._gl = this._renderer.gl;\n    this.destroyAll(true);\n    this._maxBindings = this._renderer.limits.maxUniformBindings;\n  }\n  getGlBuffer(buffer) {\n    buffer._gcLastUsed = this._renderer.gc.now;\n    return buffer._gpuData[this._renderer.uid] || this.createGLBuffer(buffer);\n  }\n  /**\n   * This binds specified buffer. On first run, it will create the webGL buffers for the context too\n   * @param buffer - the buffer to bind to the renderer\n   */\n  bind(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n  }\n  /**\n   * Binds an uniform buffer to at the given index.\n   *\n   * A cache is used so a buffer will not be bound again if already bound.\n   * @param glBuffer - the buffer to bind\n   * @param index - the base index to bind it to.\n   */\n  bindBufferBase(glBuffer, index) {\n    const { _gl: gl } = this;\n    if (this._boundBufferBases[index] !== glBuffer) {\n      this._boundBufferBases[index] = glBuffer;\n      glBuffer._lastBindBaseLocation = index;\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, index, glBuffer.buffer);\n    }\n  }\n  nextBindBase(hasTransformFeedback) {\n    this._bindCallId++;\n    this._minBaseLocation = 0;\n    if (hasTransformFeedback) {\n      this._boundBufferBases[0] = null;\n      this._minBaseLocation = 1;\n      if (this._nextBindBaseIndex < 1) {\n        this._nextBindBaseIndex = 1;\n      }\n    }\n  }\n  freeLocationForBufferBase(glBuffer) {\n    let freeIndex = this.getLastBindBaseLocation(glBuffer);\n    if (freeIndex >= this._minBaseLocation) {\n      glBuffer._lastBindCallId = this._bindCallId;\n      return freeIndex;\n    }\n    let loop = 0;\n    let nextIndex = this._nextBindBaseIndex;\n    while (loop < 2) {\n      if (nextIndex >= this._maxBindings) {\n        nextIndex = this._minBaseLocation;\n        loop++;\n      }\n      const curBuf = this._boundBufferBases[nextIndex];\n      if (curBuf && curBuf._lastBindCallId === this._bindCallId) {\n        nextIndex++;\n        continue;\n      }\n      break;\n    }\n    freeIndex = nextIndex;\n    this._nextBindBaseIndex = nextIndex + 1;\n    if (loop >= 2) {\n      return -1;\n    }\n    glBuffer._lastBindCallId = this._bindCallId;\n    this._boundBufferBases[freeIndex] = null;\n    return freeIndex;\n  }\n  getLastBindBaseLocation(glBuffer) {\n    const index = glBuffer._lastBindBaseLocation;\n    if (this._boundBufferBases[index] === glBuffer) {\n      return index;\n    }\n    return -1;\n  }\n  /**\n   * Binds a buffer whilst also binding its range.\n   * This will make the buffer start from the offset supplied rather than 0 when it is read.\n   * @param glBuffer - the buffer to bind\n   * @param index - the base index to bind at, defaults to 0\n   * @param offset - the offset to bind at (this is blocks of 256). 0 = 0, 1 = 256, 2 = 512 etc\n   * @param size - the size to bind at (this is blocks of 256).\n   */\n  bindBufferRange(glBuffer, index, offset, size) {\n    const { _gl: gl } = this;\n    offset || (offset = 0);\n    index || (index = 0);\n    this._boundBufferBases[index] = null;\n    gl.bindBufferRange(gl.UNIFORM_BUFFER, index || 0, glBuffer.buffer, offset * 256, size || 256);\n  }\n  /**\n   * Will ensure the data in the buffer is uploaded to the GPU.\n   * @param {Buffer} buffer - the buffer to update\n   */\n  updateBuffer(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    if (buffer._updateID === glBuffer.updateID) {\n      return glBuffer;\n    }\n    glBuffer.updateID = buffer._updateID;\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n    const data = buffer.data;\n    const drawType = buffer.descriptor.usage & BufferUsage.STATIC ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW;\n    if (data) {\n      if (glBuffer.byteLength >= data.byteLength) {\n        gl.bufferSubData(glBuffer.type, 0, data, 0, buffer._updateSize / data.BYTES_PER_ELEMENT);\n      } else {\n        glBuffer.byteLength = data.byteLength;\n        gl.bufferData(glBuffer.type, data, drawType);\n      }\n    } else {\n      glBuffer.byteLength = buffer.descriptor.size;\n      gl.bufferData(glBuffer.type, glBuffer.byteLength, drawType);\n    }\n    return glBuffer;\n  }\n  /**\n   * dispose all WebGL resources of all managed buffers\n   * @param contextLost\n   */\n  destroyAll(contextLost = false) {\n    this._managedBuffers.removeAll(contextLost);\n  }\n  onBufferUnload(buffer, contextLost = false) {\n    const glBuffer = buffer._gpuData[this._renderer.uid];\n    if (!glBuffer) return;\n    if (!contextLost) this._gl.deleteBuffer(glBuffer.buffer);\n  }\n  /**\n   * creates and attaches a GLBuffer object tied to the current context.\n   * @param buffer\n   * @protected\n   */\n  createGLBuffer(buffer) {\n    const { _gl: gl } = this;\n    let type = BUFFER_TYPE.ARRAY_BUFFER;\n    if (buffer.descriptor.usage & BufferUsage.INDEX) {\n      type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n    } else if (buffer.descriptor.usage & BufferUsage.UNIFORM) {\n      type = BUFFER_TYPE.UNIFORM_BUFFER;\n    }\n    const glBuffer = new GlBuffer(gl.createBuffer(), type);\n    buffer._gpuData[this._renderer.uid] = glBuffer;\n    this._managedBuffers.add(buffer);\n    return glBuffer;\n  }\n  resetState() {\n    this._boundBufferBases = /* @__PURE__ */ Object.create(null);\n  }\n}\n/** @ignore */\nGlBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"buffer\"\n};\n\nexport { GlBufferSystem };\n//# sourceMappingURL=GlBufferSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst _GlContextSystem = class _GlContextSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /**\n     * Features supported by current renderer.\n     * @type {object}\n     * @readonly\n     */\n    this.supports = {\n      /** Support for 32-bit indices buffer. */\n      uint32Indices: true,\n      /** Support for UniformBufferObjects */\n      uniformBufferObject: true,\n      /** Support for VertexArrayObjects */\n      vertexArrayObject: true,\n      /** Support for SRGB texture format */\n      srgbTextures: true,\n      /** Support for wrapping modes if a texture is non-power of two */\n      nonPowOf2wrapping: true,\n      /** Support for MSAA (antialiasing of dynamic textures) */\n      msaa: true,\n      /** Support for mipmaps if a texture is non-power of two */\n      nonPowOf2mipmaps: true\n    };\n    this._renderer = renderer;\n    this.extensions = /* @__PURE__ */ Object.create(null);\n    this.handleContextLost = this.handleContextLost.bind(this);\n    this.handleContextRestored = this.handleContextRestored.bind(this);\n  }\n  /**\n   * `true` if the context is lost\n   * @readonly\n   */\n  get isLost() {\n    return !this.gl || this.gl.isContextLost();\n  }\n  /**\n   * Handles the context change event.\n   * @param {WebGLRenderingContext} gl - New WebGL context.\n   */\n  contextChange(gl) {\n    this.gl = gl;\n    this._renderer.gl = gl;\n  }\n  init(options) {\n    options = { ..._GlContextSystem.defaultOptions, ...options };\n    let multiView = this.multiView = options.multiView;\n    if (options.context && multiView) {\n      warn(\"Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together.\");\n      multiView = false;\n    }\n    if (multiView) {\n      this.canvas = DOMAdapter.get().createCanvas(this._renderer.canvas.width, this._renderer.canvas.height);\n    } else {\n      this.canvas = this._renderer.view.canvas;\n    }\n    if (options.context) {\n      this.initFromContext(options.context);\n    } else {\n      const alpha = this._renderer.background.alpha < 1;\n      const premultipliedAlpha = options.premultipliedAlpha ?? true;\n      const antialias = options.antialias && !this._renderer.backBuffer.useBackBuffer;\n      this.createContext(options.preferWebGLVersion, {\n        alpha,\n        premultipliedAlpha,\n        antialias,\n        stencil: true,\n        preserveDrawingBuffer: options.preserveDrawingBuffer,\n        powerPreference: options.powerPreference ?? \"default\"\n      });\n    }\n  }\n  ensureCanvasSize(targetCanvas) {\n    if (!this.multiView) {\n      if (targetCanvas !== this.canvas) {\n        warn(\"multiView is disabled, but targetCanvas is not the main canvas\");\n      }\n      return;\n    }\n    const { canvas } = this;\n    if (canvas.width < targetCanvas.width || canvas.height < targetCanvas.height) {\n      canvas.width = Math.max(targetCanvas.width, targetCanvas.width);\n      canvas.height = Math.max(targetCanvas.height, targetCanvas.height);\n    }\n  }\n  /**\n   * Initializes the context.\n   * @protected\n   * @param {WebGLRenderingContext} gl - WebGL context\n   */\n  initFromContext(gl) {\n    this.gl = gl;\n    this.webGLVersion = gl instanceof DOMAdapter.get().getWebGLRenderingContext() ? 1 : 2;\n    this.getExtensions();\n    this.validateContext(gl);\n    this._renderer.runners.contextChange.emit(gl);\n    const element = this._renderer.view.canvas;\n    element.addEventListener(\"webglcontextlost\", this.handleContextLost, false);\n    element.addEventListener(\"webglcontextrestored\", this.handleContextRestored, false);\n  }\n  /**\n   * Initialize from context options\n   * @protected\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext\n   * @param preferWebGLVersion\n   * @param {object} options - context attributes\n   */\n  createContext(preferWebGLVersion, options) {\n    let gl;\n    const canvas = this.canvas;\n    if (preferWebGLVersion === 2) {\n      gl = canvas.getContext(\"webgl2\", options);\n    }\n    if (!gl) {\n      gl = canvas.getContext(\"webgl\", options);\n      if (!gl) {\n        throw new Error(\"This browser does not support WebGL. Try using the canvas renderer\");\n      }\n    }\n    this.gl = gl;\n    this.initFromContext(this.gl);\n  }\n  /** Auto-populate the {@link GlContextSystem.extensions extensions}. */\n  getExtensions() {\n    const { gl } = this;\n    const common = {\n      anisotropicFiltering: gl.getExtension(\"EXT_texture_filter_anisotropic\"),\n      floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n      s3tc: gl.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n      s3tc_sRGB: gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n      // eslint-disable-line camelcase\n      etc: gl.getExtension(\"WEBGL_compressed_texture_etc\"),\n      etc1: gl.getExtension(\"WEBGL_compressed_texture_etc1\"),\n      pvrtc: gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n      atc: gl.getExtension(\"WEBGL_compressed_texture_atc\"),\n      astc: gl.getExtension(\"WEBGL_compressed_texture_astc\"),\n      bptc: gl.getExtension(\"EXT_texture_compression_bptc\"),\n      rgtc: gl.getExtension(\"EXT_texture_compression_rgtc\"),\n      loseContext: gl.getExtension(\"WEBGL_lose_context\")\n    };\n    if (this.webGLVersion === 1) {\n      this.extensions = {\n        ...common,\n        drawBuffers: gl.getExtension(\"WEBGL_draw_buffers\"),\n        depthTexture: gl.getExtension(\"WEBGL_depth_texture\"),\n        vertexArrayObject: gl.getExtension(\"OES_vertex_array_object\") || gl.getExtension(\"MOZ_OES_vertex_array_object\") || gl.getExtension(\"WEBKIT_OES_vertex_array_object\"),\n        uint32ElementIndex: gl.getExtension(\"OES_element_index_uint\"),\n        // Floats and half-floats\n        floatTexture: gl.getExtension(\"OES_texture_float\"),\n        floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n        textureHalfFloat: gl.getExtension(\"OES_texture_half_float\"),\n        textureHalfFloatLinear: gl.getExtension(\"OES_texture_half_float_linear\"),\n        vertexAttribDivisorANGLE: gl.getExtension(\"ANGLE_instanced_arrays\"),\n        srgb: gl.getExtension(\"EXT_sRGB\")\n      };\n    } else {\n      this.extensions = {\n        ...common,\n        colorBufferFloat: gl.getExtension(\"EXT_color_buffer_float\")\n      };\n      const provokeExt = gl.getExtension(\"WEBGL_provoking_vertex\");\n      if (provokeExt) {\n        provokeExt.provokingVertexWEBGL(provokeExt.FIRST_VERTEX_CONVENTION_WEBGL);\n      }\n    }\n  }\n  /**\n   * Handles a lost webgl context\n   * @param {WebGLContextEvent} event - The context lost event.\n   */\n  handleContextLost(event) {\n    event.preventDefault();\n    if (this._contextLossForced) {\n      this._contextLossForced = false;\n      setTimeout(() => {\n        if (this.gl.isContextLost()) {\n          this.extensions.loseContext?.restoreContext();\n        }\n      }, 0);\n    }\n  }\n  /** Handles a restored webgl context. */\n  handleContextRestored() {\n    this.getExtensions();\n    this._renderer.runners.contextChange.emit(this.gl);\n  }\n  destroy() {\n    const element = this._renderer.view.canvas;\n    this._renderer = null;\n    element.removeEventListener(\"webglcontextlost\", this.handleContextLost);\n    element.removeEventListener(\"webglcontextrestored\", this.handleContextRestored);\n    this.gl.useProgram(null);\n    this.extensions.loseContext?.loseContext();\n  }\n  /**\n   * this function can be called to force a webGL context loss\n   * this will release all resources on the GPU.\n   * Useful if you need to put Pixi to sleep, and save some GPU memory\n   *\n   * As soon as render is called - all resources will be created again.\n   */\n  forceContextLoss() {\n    this.extensions.loseContext?.loseContext();\n    this._contextLossForced = true;\n  }\n  /**\n   * Validate context.\n   * @param {WebGLRenderingContext} gl - Render context.\n   */\n  validateContext(gl) {\n    const attributes = gl.getContextAttributes();\n    if (attributes && !attributes.stencil) {\n      warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\");\n    }\n    const supports = this.supports;\n    const isWebGl2 = this.webGLVersion === 2;\n    const extensions = this.extensions;\n    supports.uint32Indices = isWebGl2 || !!extensions.uint32ElementIndex;\n    supports.uniformBufferObject = isWebGl2;\n    supports.vertexArrayObject = isWebGl2 || !!extensions.vertexArrayObject;\n    supports.srgbTextures = isWebGl2 || !!extensions.srgb;\n    supports.nonPowOf2wrapping = isWebGl2;\n    supports.nonPowOf2mipmaps = isWebGl2;\n    supports.msaa = isWebGl2;\n    if (!supports.uint32Indices) {\n      warn(\"Provided WebGL context does not support 32 index buffer, large scenes may not render correctly\");\n    }\n  }\n};\n/** @ignore */\n_GlContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"context\"\n};\n/** The default options for the system. */\n_GlContextSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.context}\n   * @default null\n   */\n  context: null,\n  /**\n   * {@link WebGLOptions.premultipliedAlpha}\n   * @default true\n   */\n  premultipliedAlpha: true,\n  /**\n   * {@link WebGLOptions.preserveDrawingBuffer}\n   * @default false\n   */\n  preserveDrawingBuffer: false,\n  /**\n   * {@link WebGLOptions.powerPreference}\n   * @default default\n   */\n  powerPreference: void 0,\n  /**\n   * {@link WebGLOptions.webGLVersion}\n   * @default 2\n   */\n  preferWebGLVersion: 2,\n  /**\n   * {@link WebGLOptions.multiView}\n   * @default false\n   */\n  multiView: false\n};\nlet GlContextSystem = _GlContextSystem;\n\nexport { GlContextSystem };\n//# sourceMappingURL=GlContextSystem.mjs.map\n","\"use strict\";\nvar GL_FORMATS = /* @__PURE__ */ ((GL_FORMATS2) => {\n  GL_FORMATS2[GL_FORMATS2[\"RGBA\"] = 6408] = \"RGBA\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB\"] = 6407] = \"RGB\";\n  GL_FORMATS2[GL_FORMATS2[\"RG\"] = 33319] = \"RG\";\n  GL_FORMATS2[GL_FORMATS2[\"RED\"] = 6403] = \"RED\";\n  GL_FORMATS2[GL_FORMATS2[\"RGBA_INTEGER\"] = 36249] = \"RGBA_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB_INTEGER\"] = 36248] = \"RGB_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RG_INTEGER\"] = 33320] = \"RG_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RED_INTEGER\"] = 36244] = \"RED_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"ALPHA\"] = 6406] = \"ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE\"] = 6409] = \"LUMINANCE\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE_ALPHA\"] = 6410] = \"LUMINANCE_ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_COMPONENT\"] = 6402] = \"DEPTH_COMPONENT\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_STENCIL\"] = 34041] = \"DEPTH_STENCIL\";\n  return GL_FORMATS2;\n})(GL_FORMATS || {});\nvar GL_TARGETS = /* @__PURE__ */ ((GL_TARGETS2) => {\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D\"] = 3553] = \"TEXTURE_2D\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP\"] = 34067] = \"TEXTURE_CUBE_MAP\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D_ARRAY\"] = 35866] = \"TEXTURE_2D_ARRAY\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_X\"] = 34069] = \"TEXTURE_CUBE_MAP_POSITIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_X\"] = 34070] = \"TEXTURE_CUBE_MAP_NEGATIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Y\"] = 34071] = \"TEXTURE_CUBE_MAP_POSITIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Y\"] = 34072] = \"TEXTURE_CUBE_MAP_NEGATIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Z\"] = 34073] = \"TEXTURE_CUBE_MAP_POSITIVE_Z\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"] = 34074] = \"TEXTURE_CUBE_MAP_NEGATIVE_Z\";\n  return GL_TARGETS2;\n})(GL_TARGETS || {});\nvar GL_WRAP_MODES = /* @__PURE__ */ ((GL_WRAP_MODES2) => {\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"CLAMP\"] = 33071] = \"CLAMP\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"REPEAT\"] = 10497] = \"REPEAT\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n  return GL_WRAP_MODES2;\n})(GL_WRAP_MODES || {});\nvar GL_TYPES = /* @__PURE__ */ ((GL_TYPES2) => {\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_6_5\"] = 33635] = \"UNSIGNED_SHORT_5_6_5\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_4_4_4_4\"] = 32819] = \"UNSIGNED_SHORT_4_4_4_4\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_5_5_1\"] = 32820] = \"UNSIGNED_SHORT_5_5_5_1\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_10F_11F_11F_REV\"] = 35899] = \"UNSIGNED_INT_10F_11F_11F_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_2_10_10_10_REV\"] = 33640] = \"UNSIGNED_INT_2_10_10_10_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_24_8\"] = 34042] = \"UNSIGNED_INT_24_8\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_5_9_9_9_REV\"] = 35902] = \"UNSIGNED_INT_5_9_9_9_REV\";\n  GL_TYPES2[GL_TYPES2[\"BYTE\"] = 5120] = \"BYTE\";\n  GL_TYPES2[GL_TYPES2[\"SHORT\"] = 5122] = \"SHORT\";\n  GL_TYPES2[GL_TYPES2[\"INT\"] = 5124] = \"INT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT\"] = 5126] = \"FLOAT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT_32_UNSIGNED_INT_24_8_REV\"] = 36269] = \"FLOAT_32_UNSIGNED_INT_24_8_REV\";\n  GL_TYPES2[GL_TYPES2[\"HALF_FLOAT\"] = 36193] = \"HALF_FLOAT\";\n  return GL_TYPES2;\n})(GL_TYPES || {});\n\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { GL_TYPES } from '../../texture/const.mjs';\n\n\"use strict\";\nconst infoMap = {\n  uint8x2: GL_TYPES.UNSIGNED_BYTE,\n  uint8x4: GL_TYPES.UNSIGNED_BYTE,\n  sint8x2: GL_TYPES.BYTE,\n  sint8x4: GL_TYPES.BYTE,\n  unorm8x2: GL_TYPES.UNSIGNED_BYTE,\n  unorm8x4: GL_TYPES.UNSIGNED_BYTE,\n  snorm8x2: GL_TYPES.BYTE,\n  snorm8x4: GL_TYPES.BYTE,\n  uint16x2: GL_TYPES.UNSIGNED_SHORT,\n  uint16x4: GL_TYPES.UNSIGNED_SHORT,\n  sint16x2: GL_TYPES.SHORT,\n  sint16x4: GL_TYPES.SHORT,\n  unorm16x2: GL_TYPES.UNSIGNED_SHORT,\n  unorm16x4: GL_TYPES.UNSIGNED_SHORT,\n  snorm16x2: GL_TYPES.SHORT,\n  snorm16x4: GL_TYPES.SHORT,\n  float16x2: GL_TYPES.HALF_FLOAT,\n  float16x4: GL_TYPES.HALF_FLOAT,\n  float32: GL_TYPES.FLOAT,\n  float32x2: GL_TYPES.FLOAT,\n  float32x3: GL_TYPES.FLOAT,\n  float32x4: GL_TYPES.FLOAT,\n  uint32: GL_TYPES.UNSIGNED_INT,\n  uint32x2: GL_TYPES.UNSIGNED_INT,\n  uint32x3: GL_TYPES.UNSIGNED_INT,\n  uint32x4: GL_TYPES.UNSIGNED_INT,\n  sint32: GL_TYPES.INT,\n  sint32x2: GL_TYPES.INT,\n  sint32x3: GL_TYPES.INT,\n  sint32x4: GL_TYPES.INT\n};\nfunction getGlTypeFromFormat(format) {\n  return infoMap[format] ?? infoMap.float32;\n}\n\nexport { getGlTypeFromFormat };\n//# sourceMappingURL=getGlTypeFromFormat.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash.mjs';\nimport { getAttributeInfoFromFormat } from '../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { ensureAttributes } from '../shader/program/ensureAttributes.mjs';\nimport { getGlTypeFromFormat } from './utils/getGlTypeFromFormat.mjs';\n\n\"use strict\";\nconst topologyToGlMap = {\n  \"point-list\": 0,\n  \"line-list\": 1,\n  \"line-strip\": 3,\n  \"triangle-list\": 4,\n  \"triangle-strip\": 5\n};\nclass GlGeometryGpuData {\n  constructor() {\n    this.vaoCache = /* @__PURE__ */ Object.create(null);\n  }\n  destroy() {\n    this.vaoCache = /* @__PURE__ */ Object.create(null);\n  }\n}\nclass GlGeometrySystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n    this._activeGeometry = null;\n    this._activeVao = null;\n    this.hasVao = true;\n    this.hasInstance = true;\n    this._managedGeometries = new GCManagedHash({\n      renderer,\n      type: \"resource\",\n      onUnload: this.onGeometryUnload.bind(this),\n      name: \"glGeometry\"\n    });\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    const gl = this.gl = this._renderer.gl;\n    if (!this._renderer.context.supports.vertexArrayObject) {\n      throw new Error(\"[PixiJS] Vertex Array Objects are not supported on this device\");\n    }\n    this.destroyAll(true);\n    const nativeVaoExtension = this._renderer.context.extensions.vertexArrayObject;\n    if (nativeVaoExtension) {\n      gl.createVertexArray = () => nativeVaoExtension.createVertexArrayOES();\n      gl.bindVertexArray = (vao) => nativeVaoExtension.bindVertexArrayOES(vao);\n      gl.deleteVertexArray = (vao) => nativeVaoExtension.deleteVertexArrayOES(vao);\n    }\n    const nativeInstancedExtension = this._renderer.context.extensions.vertexAttribDivisorANGLE;\n    if (nativeInstancedExtension) {\n      gl.drawArraysInstanced = (a, b, c, d) => {\n        nativeInstancedExtension.drawArraysInstancedANGLE(a, b, c, d);\n      };\n      gl.drawElementsInstanced = (a, b, c, d, e) => {\n        nativeInstancedExtension.drawElementsInstancedANGLE(a, b, c, d, e);\n      };\n      gl.vertexAttribDivisor = (a, b) => nativeInstancedExtension.vertexAttribDivisorANGLE(a, b);\n    }\n    this._activeGeometry = null;\n    this._activeVao = null;\n  }\n  /**\n   * Binds geometry so that is can be drawn. Creating a Vao if required\n   * @param geometry - Instance of geometry to bind.\n   * @param program - Instance of program to use vao for.\n   */\n  bind(geometry, program) {\n    const gl = this.gl;\n    this._activeGeometry = geometry;\n    const vao = this.getVao(geometry, program);\n    if (this._activeVao !== vao) {\n      this._activeVao = vao;\n      gl.bindVertexArray(vao);\n    }\n    this.updateBuffers();\n  }\n  /** Reset and unbind any active VAO and geometry. */\n  resetState() {\n    this.unbind();\n  }\n  /** Update buffers of the currently bound geometry. */\n  updateBuffers() {\n    const geometry = this._activeGeometry;\n    const bufferSystem = this._renderer.buffer;\n    for (let i = 0; i < geometry.buffers.length; i++) {\n      const buffer = geometry.buffers[i];\n      bufferSystem.updateBuffer(buffer);\n    }\n    geometry._gcLastUsed = this._renderer.gc.now;\n  }\n  /**\n   * Check compatibility between a geometry and a program\n   * @param geometry - Geometry instance.\n   * @param program - Program instance.\n   */\n  checkCompatibility(geometry, program) {\n    const geometryAttributes = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    for (const j in shaderAttributes) {\n      if (!geometryAttributes[j]) {\n        throw new Error(`shader and geometry incompatible, geometry missing the \"${j}\" attribute`);\n      }\n    }\n  }\n  /**\n   * Takes a geometry and program and generates a unique signature for them.\n   * @param geometry - To get signature from.\n   * @param program - To test geometry against.\n   * @returns - Unique signature of the geometry and program\n   */\n  getSignature(geometry, program) {\n    const attribs = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    const strings = [\"g\", geometry.uid];\n    for (const i in attribs) {\n      if (shaderAttributes[i]) {\n        strings.push(i, shaderAttributes[i].location);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  getVao(geometry, program) {\n    return geometry._gpuData[this._renderer.uid]?.vaoCache[program._key] || this.initGeometryVao(geometry, program);\n  }\n  /**\n   * Creates or gets Vao with the same structure as the geometry and stores it on the geometry.\n   * If vao is created, it is bound automatically. We use a shader to infer what and how to set up the\n   * attribute locations.\n   * @param geometry - Instance of geometry to to generate Vao for.\n   * @param program\n   * @param _incRefCount - Increment refCount of all geometry buffers.\n   */\n  initGeometryVao(geometry, program, _incRefCount = true) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    this._renderer.shader._getProgramData(program);\n    this.checkCompatibility(geometry, program);\n    const signature = this.getSignature(geometry, program);\n    let gpuData = geometry._gpuData[this._renderer.uid];\n    if (!gpuData) {\n      gpuData = new GlGeometryGpuData();\n      geometry._gpuData[this._renderer.uid] = gpuData;\n      this._managedGeometries.add(geometry);\n    }\n    const vaoObjectHash = gpuData.vaoCache;\n    let vao = vaoObjectHash[signature];\n    if (vao) {\n      vaoObjectHash[program._key] = vao;\n      return vao;\n    }\n    ensureAttributes(geometry, program._attributeData);\n    const buffers = geometry.buffers;\n    vao = gl.createVertexArray();\n    gl.bindVertexArray(vao);\n    for (let i = 0; i < buffers.length; i++) {\n      const buffer = buffers[i];\n      bufferSystem.bind(buffer);\n    }\n    this.activateVao(geometry, program);\n    vaoObjectHash[program._key] = vao;\n    vaoObjectHash[signature] = vao;\n    gl.bindVertexArray(null);\n    return vao;\n  }\n  onGeometryUnload(geometry, contextLost = false) {\n    const gpuData = geometry._gpuData[this._renderer.uid];\n    if (!gpuData) return;\n    const vaoCache = gpuData.vaoCache;\n    if (!contextLost) {\n      for (const i in vaoCache) {\n        if (this._activeVao !== vaoCache[i]) {\n          this.resetState();\n        }\n        this.gl.deleteVertexArray(vaoCache[i]);\n      }\n    }\n  }\n  /**\n   * Dispose all WebGL resources of all managed geometries.\n   * @param [contextLost=false] - If context was lost, we suppress `gl.delete` calls\n   */\n  destroyAll(contextLost = false) {\n    this._managedGeometries.removeAll(contextLost);\n  }\n  /**\n   * Activate vertex array object.\n   * @param geometry - Geometry instance.\n   * @param program - Shader program instance.\n   */\n  activateVao(geometry, program) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    const attributes = geometry.attributes;\n    if (geometry.indexBuffer) {\n      bufferSystem.bind(geometry.indexBuffer);\n    }\n    let lastBuffer = null;\n    for (const j in attributes) {\n      const attribute = attributes[j];\n      const buffer = attribute.buffer;\n      const glBuffer = bufferSystem.getGlBuffer(buffer);\n      const programAttrib = program._attributeData[j];\n      if (programAttrib) {\n        if (lastBuffer !== glBuffer) {\n          bufferSystem.bind(buffer);\n          lastBuffer = glBuffer;\n        }\n        const location = programAttrib.location;\n        gl.enableVertexAttribArray(location);\n        const attributeInfo = getAttributeInfoFromFormat(attribute.format);\n        const type = getGlTypeFromFormat(attribute.format);\n        if (programAttrib.format?.substring(1, 4) === \"int\") {\n          gl.vertexAttribIPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attribute.stride,\n            attribute.offset\n          );\n        } else {\n          gl.vertexAttribPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attributeInfo.normalised,\n            attribute.stride,\n            attribute.offset\n          );\n        }\n        if (attribute.instance) {\n          if (this.hasInstance) {\n            const divisor = attribute.divisor ?? 1;\n            gl.vertexAttribDivisor(location, divisor);\n          } else {\n            throw new Error(\"geometry error, GPU Instancing is not supported on this device\");\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Draws the currently bound geometry.\n   * @param topology - The type primitive to render.\n   * @param size - The number of elements to be rendered. If not specified, all vertices after the\n   *  starting vertex will be drawn.\n   * @param start - The starting vertex in the geometry to start drawing from. If not specified,\n   *  drawing will start from the first vertex.\n   * @param instanceCount - The number of instances of the set of elements to execute. If not specified,\n   *  all instances will be drawn.\n   * @returns This instance of the geometry system.\n   */\n  draw(topology, size, start, instanceCount) {\n    const { gl } = this._renderer;\n    const geometry = this._activeGeometry;\n    const glTopology = topologyToGlMap[topology || geometry.topology];\n    instanceCount ?? (instanceCount = geometry.instanceCount);\n    if (geometry.indexBuffer) {\n      const byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n      const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n      if (instanceCount !== 1) {\n        gl.drawElementsInstanced(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize, instanceCount);\n      } else {\n        gl.drawElements(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize);\n      }\n    } else if (instanceCount !== 1) {\n      gl.drawArraysInstanced(glTopology, start || 0, size || geometry.getSize(), instanceCount);\n    } else {\n      gl.drawArrays(glTopology, start || 0, size || geometry.getSize());\n    }\n    return this;\n  }\n  /** Unbind/reset everything. */\n  unbind() {\n    this.gl.bindVertexArray(null);\n    this._activeVao = null;\n    this._activeGeometry = null;\n  }\n  destroy() {\n    this._managedGeometries.destroy();\n    this._renderer = null;\n    this.gl = null;\n    this._activeVao = null;\n    this._activeGeometry = null;\n  }\n}\n/** @ignore */\nGlGeometrySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"geometry\"\n};\n\nexport { GlGeometryGpuData, GlGeometrySystem };\n//# sourceMappingURL=GlGeometrySystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { Geometry } from '../shared/geometry/Geometry.mjs';\nimport { Shader } from '../shared/shader/Shader.mjs';\nimport { State } from '../shared/state/State.mjs';\nimport { TextureSource } from '../shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../shared/texture/Texture.mjs';\nimport { GlProgram } from './shader/GlProgram.mjs';\n\n\"use strict\";\nconst bigTriangleGeometry = new Geometry({\n  attributes: {\n    aPosition: [\n      -1,\n      -1,\n      // Bottom left corner\n      3,\n      -1,\n      // Bottom right corner, extending beyond right edge\n      -1,\n      3\n      // Top left corner, extending beyond top edge\n    ]\n  }\n});\nconst _GlBackBufferSystem = class _GlBackBufferSystem {\n  constructor(renderer) {\n    /** if true, the back buffer is used */\n    this.useBackBuffer = false;\n    this._useBackBufferThisRender = false;\n    this._renderer = renderer;\n  }\n  init(options = {}) {\n    const { useBackBuffer, antialias } = { ..._GlBackBufferSystem.defaultOptions, ...options };\n    this.useBackBuffer = useBackBuffer;\n    this._antialias = antialias;\n    if (!this._renderer.context.supports.msaa) {\n      warn(\"antialiasing, is not supported on when using the back buffer\");\n      this._antialias = false;\n    }\n    this._state = State.for2d();\n    const bigTriangleProgram = new GlProgram({\n      vertex: `\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }`,\n      fragment: `\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }`,\n      name: \"big-triangle\"\n    });\n    this._bigTriangleShader = new Shader({\n      glProgram: bigTriangleProgram,\n      resources: {\n        uTexture: Texture.WHITE.source\n      }\n    });\n  }\n  /**\n   * This is called before the RenderTargetSystem is started. This is where\n   * we replace the target with the back buffer if required.\n   * @param options - The options for this render.\n   */\n  renderStart(options) {\n    const renderTarget = this._renderer.renderTarget.getRenderTarget(options.target);\n    this._useBackBufferThisRender = this.useBackBuffer && !!renderTarget.isRoot;\n    if (this._useBackBufferThisRender) {\n      const renderTarget2 = this._renderer.renderTarget.getRenderTarget(options.target);\n      this._targetTexture = renderTarget2.colorTexture;\n      options.target = this._getBackBufferTexture(renderTarget2.colorTexture);\n    }\n  }\n  renderEnd() {\n    this._presentBackBuffer();\n  }\n  _presentBackBuffer() {\n    const renderer = this._renderer;\n    renderer.renderTarget.finishRenderPass();\n    if (!this._useBackBufferThisRender) return;\n    renderer.renderTarget.bind(this._targetTexture, false);\n    this._bigTriangleShader.resources.uTexture = this._backBufferTexture.source;\n    renderer.encoder.draw({\n      geometry: bigTriangleGeometry,\n      shader: this._bigTriangleShader,\n      state: this._state\n    });\n  }\n  _getBackBufferTexture(targetSourceTexture) {\n    this._backBufferTexture = this._backBufferTexture || new Texture({\n      source: new TextureSource({\n        width: targetSourceTexture.width,\n        height: targetSourceTexture.height,\n        resolution: targetSourceTexture._resolution,\n        antialias: this._antialias\n      })\n    });\n    this._backBufferTexture.source.resize(\n      targetSourceTexture.width,\n      targetSourceTexture.height,\n      targetSourceTexture._resolution\n    );\n    return this._backBufferTexture;\n  }\n  /** destroys the back buffer */\n  destroy() {\n    if (this._backBufferTexture) {\n      this._backBufferTexture.destroy();\n      this._backBufferTexture = null;\n    }\n  }\n};\n/** @ignore */\n_GlBackBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"backBuffer\",\n  priority: 1\n};\n/** default options for the back buffer system */\n_GlBackBufferSystem.defaultOptions = {\n  /** if true will use the back buffer where required */\n  useBackBuffer: false\n};\nlet GlBackBufferSystem = _GlBackBufferSystem;\n\nexport { GlBackBufferSystem };\n//# sourceMappingURL=GlBackBufferSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlColorMaskSystem {\n  constructor(renderer) {\n    this._colorMaskCache = 15;\n    this._renderer = renderer;\n  }\n  setMask(colorMask) {\n    if (this._colorMaskCache === colorMask) return;\n    this._colorMaskCache = colorMask;\n    this._renderer.gl.colorMask(\n      !!(colorMask & 8),\n      !!(colorMask & 4),\n      !!(colorMask & 2),\n      !!(colorMask & 1)\n    );\n  }\n}\n/** @ignore */\nGlColorMaskSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"colorMask\"\n};\n\nexport { GlColorMaskSystem };\n//# sourceMappingURL=GlColorMaskSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlEncoderSystem {\n  constructor(renderer) {\n    this.commandFinished = Promise.resolve();\n    this._renderer = renderer;\n  }\n  setGeometry(geometry, shader) {\n    this._renderer.geometry.bind(geometry, shader.glProgram);\n  }\n  finishRenderPass() {\n  }\n  draw(options) {\n    const renderer = this._renderer;\n    const { geometry, shader, state, skipSync, topology: type, size, start, instanceCount } = options;\n    renderer.shader.bind(shader, skipSync);\n    renderer.geometry.bind(geometry, renderer.shader._activeProgram);\n    if (state) {\n      renderer.state.set(state);\n    }\n    renderer.geometry.draw(type, size, start, instanceCount ?? geometry.instanceCount);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlEncoderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"encoder\"\n};\n\nexport { GlEncoderSystem };\n//# sourceMappingURL=GlEncoderSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkMaxIfStatementsInShader } from '../../batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nclass GlLimitsSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  contextChange() {\n    const gl = this._renderer.gl;\n    this.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n    this.maxBatchableTextures = checkMaxIfStatementsInShader(this.maxTextures, gl);\n    const isWebGl2 = this._renderer.context.webGLVersion === 2;\n    this.maxUniformBindings = isWebGl2 ? gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS) : 0;\n  }\n  destroy() {\n  }\n}\n/** @ignore */\nGlLimitsSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"limits\"\n};\n\nexport { GlLimitsSystem };\n//# sourceMappingURL=GlLimitsSystem.mjs.map\n","\"use strict\";\nclass GlRenderTarget {\n  constructor() {\n    this.width = -1;\n    this.height = -1;\n    this.msaa = false;\n    /**\n     * Tracks which mip level is currently attached to this render target's framebuffer.\n     * This lets us skip redundant framebufferTexture2D calls on the common path.\n     * @internal\n     */\n    this._attachedMipLevel = 0;\n    /**\n     * Tracks which array layer (or cube face index) is currently attached to this render target's framebuffer.\n     * For non-array 2D textures this will always be 0.\n     * @internal\n     */\n    this._attachedLayer = 0;\n    this.msaaRenderBuffer = [];\n  }\n}\n\nexport { GlRenderTarget };\n//# sourceMappingURL=GlRenderTarget.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuStencilModesToPixi } from '../gpu/state/GpuStencilModesToPixi.mjs';\nimport { STENCIL_MODES } from '../shared/state/const.mjs';\n\n\"use strict\";\nclass GlStencilSystem {\n  constructor(renderer) {\n    this._stencilCache = {\n      enabled: false,\n      stencilReference: 0,\n      stencilMode: STENCIL_MODES.NONE\n    };\n    this._renderTargetStencilState = /* @__PURE__ */ Object.create(null);\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._comparisonFuncMapping = {\n      always: gl.ALWAYS,\n      never: gl.NEVER,\n      equal: gl.EQUAL,\n      \"not-equal\": gl.NOTEQUAL,\n      less: gl.LESS,\n      \"less-equal\": gl.LEQUAL,\n      greater: gl.GREATER,\n      \"greater-equal\": gl.GEQUAL\n    };\n    this._stencilOpsMapping = {\n      keep: gl.KEEP,\n      zero: gl.ZERO,\n      replace: gl.REPLACE,\n      invert: gl.INVERT,\n      \"increment-clamp\": gl.INCR,\n      \"decrement-clamp\": gl.DECR,\n      \"increment-wrap\": gl.INCR_WRAP,\n      \"decrement-wrap\": gl.DECR_WRAP\n    };\n    this.resetState();\n  }\n  onRenderTargetChange(renderTarget) {\n    if (this._activeRenderTarget === renderTarget) return;\n    this._activeRenderTarget = renderTarget;\n    let stencilState = this._renderTargetStencilState[renderTarget.uid];\n    if (!stencilState) {\n      stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n        stencilMode: STENCIL_MODES.DISABLED,\n        stencilReference: 0\n      };\n    }\n    this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n  }\n  resetState() {\n    this._stencilCache.enabled = false;\n    this._stencilCache.stencilMode = STENCIL_MODES.NONE;\n    this._stencilCache.stencilReference = 0;\n  }\n  setStencilMode(stencilMode, stencilReference) {\n    const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n    const gl = this._gl;\n    const mode = GpuStencilModesToPixi[stencilMode];\n    const _stencilCache = this._stencilCache;\n    stencilState.stencilMode = stencilMode;\n    stencilState.stencilReference = stencilReference;\n    if (stencilMode === STENCIL_MODES.DISABLED) {\n      if (this._stencilCache.enabled) {\n        this._stencilCache.enabled = false;\n        gl.disable(gl.STENCIL_TEST);\n      }\n      return;\n    }\n    if (!this._stencilCache.enabled) {\n      this._stencilCache.enabled = true;\n      gl.enable(gl.STENCIL_TEST);\n    }\n    if (stencilMode !== _stencilCache.stencilMode || _stencilCache.stencilReference !== stencilReference) {\n      _stencilCache.stencilMode = stencilMode;\n      _stencilCache.stencilReference = stencilReference;\n      gl.stencilFunc(this._comparisonFuncMapping[mode.stencilBack.compare], stencilReference, 255);\n      gl.stencilOp(gl.KEEP, gl.KEEP, this._stencilOpsMapping[mode.stencilBack.passOp]);\n    }\n  }\n}\n/** @ignore */\nGlStencilSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"stencil\"\n};\n\nexport { GlStencilSystem };\n//# sourceMappingURL=GlStencilSystem.mjs.map\n","\"use strict\";\nconst WGSL_TO_STD40_SIZE = {\n  f32: 4,\n  i32: 4,\n  \"vec2<f32>\": 8,\n  \"vec3<f32>\": 12,\n  \"vec4<f32>\": 16,\n  \"vec2<i32>\": 8,\n  \"vec3<i32>\": 12,\n  \"vec4<i32>\": 16,\n  \"mat2x2<f32>\": 16 * 2,\n  \"mat3x3<f32>\": 16 * 3,\n  \"mat4x4<f32>\": 16 * 4\n  // TODO - not essential for now but support these in the future\n  // int:      4,\n  // ivec2:    8,\n  // ivec3:    12,\n  // ivec4:    16,\n  // uint:     4,\n  // uvec2:    8,\n  // uvec3:    12,\n  // uvec4:    16,\n  // bool:     4,\n  // bvec2:    8,\n  // bvec3:    12,\n  // bvec4:    16,\n  // mat2:     16 * 2,\n  // mat3:     16 * 3,\n  // mat4:     16 * 4,\n};\nfunction createUboElementsSTD40(uniformData) {\n  const uboElements = uniformData.map((data) => ({\n    data,\n    offset: 0,\n    size: 0\n  }));\n  const chunkSize = 16;\n  let size = 0;\n  let offset = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    size = WGSL_TO_STD40_SIZE[uboElement.data.type];\n    if (!size) {\n      throw new Error(`Unknown type ${uboElement.data.type}`);\n    }\n    if (uboElement.data.size > 1) {\n      size = Math.max(size, chunkSize) * uboElement.data.size;\n    }\n    const boundary = size === 12 ? 16 : size;\n    uboElement.size = size;\n    const curOffset = offset % chunkSize;\n    if (curOffset > 0 && chunkSize - curOffset < boundary) {\n      offset += (chunkSize - curOffset) % 16;\n    } else {\n      offset += (size - curOffset % size) % size;\n    }\n    uboElement.offset = offset;\n    offset += size;\n  }\n  offset = Math.ceil(offset / 16) * 16;\n  return { uboElements, size: offset };\n}\n\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 };\n//# sourceMappingURL=createUboElementsSTD40.mjs.map\n","import { WGSL_TO_STD40_SIZE } from './createUboElementsSTD40.mjs';\n\n\"use strict\";\nfunction generateArraySyncSTD40(uboElement, offsetToAdd) {\n  const rowSize = Math.max(WGSL_TO_STD40_SIZE[uboElement.data.type] / 16, 1);\n  const elementSize = uboElement.data.value.length / uboElement.data.size;\n  const remainder = (4 - elementSize % 4) % 4;\n  const data = uboElement.data.type.indexOf(\"i32\") >= 0 ? \"dataInt32\" : \"data\";\n  return `\n        v = uv.${uboElement.data.name};\n        offset += ${offsetToAdd};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${uboElement.data.size * rowSize}; i++)\n        {\n            for(var j = 0; j < ${elementSize}; j++)\n            {\n                ${data}[arrayOffset++] = v[t++];\n            }\n            ${remainder !== 0 ? `arrayOffset += ${remainder};` : \"\"}\n        }\n    `;\n}\n\nexport { generateArraySyncSTD40 };\n//# sourceMappingURL=generateArraySyncSTD40.mjs.map\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction.mjs';\nimport { uboSyncFunctionsSTD40 } from '../../../shared/shader/utils/uboSyncFunctions.mjs';\nimport { generateArraySyncSTD40 } from './generateArraySyncSTD40.mjs';\n\n\"use strict\";\nfunction createUboSyncFunctionSTD40(uboElements) {\n  return createUboSyncFunction(\n    uboElements,\n    \"uboStd40\",\n    generateArraySyncSTD40,\n    uboSyncFunctionsSTD40\n  );\n}\n\nexport { createUboSyncFunctionSTD40 };\n//# sourceMappingURL=createUboSyncSTD40.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { UboSystem } from '../shared/shader/UboSystem.mjs';\nimport { createUboElementsSTD40 } from './shader/utils/createUboElementsSTD40.mjs';\nimport { createUboSyncFunctionSTD40 } from './shader/utils/createUboSyncSTD40.mjs';\n\n\"use strict\";\nclass GlUboSystem extends UboSystem {\n  constructor() {\n    super({\n      createUboElements: createUboElementsSTD40,\n      generateUboSync: createUboSyncFunctionSTD40\n    });\n  }\n}\n/** @ignore */\nGlUboSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"ubo\"\n};\n\nexport { GlUboSystem };\n//# sourceMappingURL=GlUboSystem.mjs.map\n","import { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { CanvasSource } from '../../shared/texture/sources/CanvasSource.mjs';\nimport { CLEAR } from '../const.mjs';\nimport { GlRenderTarget } from '../GlRenderTarget.mjs';\n\n\"use strict\";\nclass GlRenderTargetAdaptor {\n  constructor() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n  }\n  init(renderer, renderTargetSystem) {\n    this._renderer = renderer;\n    this._renderTargetSystem = renderTargetSystem;\n    renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n    const gl = this._renderer.gl;\n    this._drawBuffersCache = [];\n    for (let i = 1; i <= 16; i++) {\n      this._drawBuffersCache[i] = Array.from({ length: i }, (_, j) => gl.COLOR_ATTACHMENT0 + j);\n    }\n  }\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const renderer = this._renderer;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(sourceRenderSurfaceTexture);\n    const gl = renderer.gl;\n    this.finishRenderPass(sourceRenderSurfaceTexture);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    renderer.texture.bind(destinationTexture, 0);\n    gl.copyTexSubImage2D(\n      gl.TEXTURE_2D,\n      0,\n      originDest.x,\n      originDest.y,\n      originSrc.x,\n      originSrc.y,\n      size.width,\n      size.height\n    );\n    return destinationTexture;\n  }\n  startRenderPass(renderTarget, clear = true, clearColor, viewport, mipLevel = 0, layer = 0) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const source = renderTarget.colorTexture;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (layer !== 0 && this._renderer.context.webGLVersion < 2) {\n      throw new Error(\"[RenderTargetSystem] Rendering to array layers requires WebGL2.\");\n    }\n    if (mipLevel > 0) {\n      if (gpuRenderTarget.msaa) {\n        throw new Error(\"[RenderTargetSystem] Rendering to mip levels is not supported with MSAA render targets.\");\n      }\n      if (this._renderer.context.webGLVersion < 2) {\n        throw new Error(\"[RenderTargetSystem] Rendering to mip levels requires WebGL2.\");\n      }\n    }\n    let viewPortY = viewport.y;\n    if (renderTarget.isRoot) {\n      viewPortY = source.pixelHeight - viewport.height - viewport.y;\n    }\n    renderTarget.colorTextures.forEach((texture) => {\n      this._renderer.texture.unbind(texture);\n    });\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, gpuRenderTarget.framebuffer);\n    if (!renderTarget.isRoot && (gpuRenderTarget._attachedMipLevel !== mipLevel || gpuRenderTarget._attachedLayer !== layer)) {\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const glSource = this._renderer.texture.getGlSource(colorTexture);\n        if (glSource.target === gl.TEXTURE_2D) {\n          if (layer !== 0) {\n            throw new Error(\"[RenderTargetSystem] layer must be 0 when rendering to 2D textures in WebGL.\");\n          }\n          gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0 + i,\n            gl.TEXTURE_2D,\n            glSource.texture,\n            mipLevel\n          );\n        } else if (glSource.target === gl.TEXTURE_2D_ARRAY) {\n          if (this._renderer.context.webGLVersion < 2) {\n            throw new Error(\"[RenderTargetSystem] Rendering to 2D array textures requires WebGL2.\");\n          }\n          gl.framebufferTextureLayer(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0 + i,\n            glSource.texture,\n            mipLevel,\n            layer\n          );\n        } else if (glSource.target === gl.TEXTURE_CUBE_MAP) {\n          if (layer < 0 || layer > 5) {\n            throw new Error(\"[RenderTargetSystem] Cube map layer must be between 0 and 5.\");\n          }\n          gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0 + i,\n            gl.TEXTURE_CUBE_MAP_POSITIVE_X + layer,\n            glSource.texture,\n            mipLevel\n          );\n        } else {\n          throw new Error(\"[RenderTargetSystem] Unsupported texture target for render-to-layer in WebGL.\");\n        }\n      });\n      gpuRenderTarget._attachedMipLevel = mipLevel;\n      gpuRenderTarget._attachedLayer = layer;\n    }\n    if (renderTarget.colorTextures.length > 1) {\n      this._setDrawBuffers(renderTarget, gl);\n    }\n    const viewPortCache = this._viewPortCache;\n    if (viewPortCache.x !== viewport.x || viewPortCache.y !== viewPortY || viewPortCache.width !== viewport.width || viewPortCache.height !== viewport.height) {\n      viewPortCache.x = viewport.x;\n      viewPortCache.y = viewPortY;\n      viewPortCache.width = viewport.width;\n      viewPortCache.height = viewport.height;\n      gl.viewport(\n        viewport.x,\n        viewPortY,\n        viewport.width,\n        viewport.height\n      );\n    }\n    if (!gpuRenderTarget.depthStencilRenderBuffer && (renderTarget.stencil || renderTarget.depth)) {\n      this._initStencil(gpuRenderTarget);\n    }\n    this.clear(renderTarget, clear, clearColor);\n  }\n  finishRenderPass(renderTarget) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (!glRenderTarget.msaa) return;\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, glRenderTarget.framebuffer);\n    gl.blitFramebuffer(\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      gl.COLOR_BUFFER_BIT,\n      gl.NEAREST\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.framebuffer);\n  }\n  initGpuRenderTarget(renderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const glRenderTarget = new GlRenderTarget();\n    glRenderTarget._attachedMipLevel = 0;\n    glRenderTarget._attachedLayer = 0;\n    const colorTexture = renderTarget.colorTexture;\n    if (colorTexture instanceof CanvasSource) {\n      this._renderer.context.ensureCanvasSize(renderTarget.colorTexture.resource);\n      glRenderTarget.framebuffer = null;\n      return glRenderTarget;\n    }\n    this._initColor(renderTarget, glRenderTarget);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return glRenderTarget;\n  }\n  destroyGpuRenderTarget(gpuRenderTarget) {\n    const gl = this._renderer.gl;\n    if (gpuRenderTarget.framebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.framebuffer);\n      gpuRenderTarget.framebuffer = null;\n    }\n    if (gpuRenderTarget.resolveTargetFramebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.resolveTargetFramebuffer);\n      gpuRenderTarget.resolveTargetFramebuffer = null;\n    }\n    if (gpuRenderTarget.depthStencilRenderBuffer) {\n      gl.deleteRenderbuffer(gpuRenderTarget.depthStencilRenderBuffer);\n      gpuRenderTarget.depthStencilRenderBuffer = null;\n    }\n    gpuRenderTarget.msaaRenderBuffer.forEach((renderBuffer) => {\n      gl.deleteRenderbuffer(renderBuffer);\n    });\n    gpuRenderTarget.msaaRenderBuffer = null;\n  }\n  clear(_renderTarget, clear, clearColor, _viewport, _mipLevel = 0, layer = 0) {\n    if (!clear) return;\n    if (layer !== 0) {\n      throw new Error(\"[RenderTargetSystem] Clearing array layers is not supported in WebGL renderer.\");\n    }\n    const renderTargetSystem = this._renderTargetSystem;\n    if (typeof clear === \"boolean\") {\n      clear = clear ? CLEAR.ALL : CLEAR.NONE;\n    }\n    const gl = this._renderer.gl;\n    if (clear & CLEAR.COLOR) {\n      clearColor ?? (clearColor = renderTargetSystem.defaultClearColor);\n      const clearColorCache = this._clearColorCache;\n      const clearColorArray = clearColor;\n      if (clearColorCache[0] !== clearColorArray[0] || clearColorCache[1] !== clearColorArray[1] || clearColorCache[2] !== clearColorArray[2] || clearColorCache[3] !== clearColorArray[3]) {\n        clearColorCache[0] = clearColorArray[0];\n        clearColorCache[1] = clearColorArray[1];\n        clearColorCache[2] = clearColorArray[2];\n        clearColorCache[3] = clearColorArray[3];\n        gl.clearColor(clearColorArray[0], clearColorArray[1], clearColorArray[2], clearColorArray[3]);\n      }\n    }\n    gl.clear(clear);\n  }\n  resizeGpuRenderTarget(renderTarget) {\n    if (renderTarget.isRoot) return;\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    this._resizeColor(renderTarget, glRenderTarget);\n    if (renderTarget.stencil || renderTarget.depth) {\n      this._resizeStencil(glRenderTarget);\n    }\n  }\n  _initColor(renderTarget, glRenderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const resolveTargetFramebuffer = gl.createFramebuffer();\n    glRenderTarget.resolveTargetFramebuffer = resolveTargetFramebuffer;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, resolveTargetFramebuffer);\n    glRenderTarget.width = renderTarget.colorTexture.source.pixelWidth;\n    glRenderTarget.height = renderTarget.colorTexture.source.pixelHeight;\n    const colorTextures = renderTarget.colorTextures;\n    colorTextures.forEach((colorTexture, i) => {\n      const source = colorTexture.source;\n      if (source.antialias) {\n        if (renderer.context.supports.msaa) {\n          glRenderTarget.msaa = true;\n        } else {\n          warn(\"[RenderTexture] Antialiasing on textures is not supported in WebGL1\");\n        }\n      }\n      renderer.texture.bindSource(source, 0);\n      const glSource = renderer.texture.getGlSource(source);\n      const glTexture = glSource.texture;\n      if (glSource.target === gl.TEXTURE_2D) {\n        gl.framebufferTexture2D(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          gl.TEXTURE_2D,\n          glTexture,\n          0\n        );\n      } else if (glSource.target === gl.TEXTURE_2D_ARRAY) {\n        if (renderer.context.webGLVersion < 2) {\n          throw new Error(\"[RenderTargetSystem] TEXTURE_2D_ARRAY requires WebGL2.\");\n        }\n        gl.framebufferTextureLayer(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          glTexture,\n          0,\n          0\n        );\n      } else if (glSource.target === gl.TEXTURE_CUBE_MAP) {\n        gl.framebufferTexture2D(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          gl.TEXTURE_CUBE_MAP_POSITIVE_X,\n          glTexture,\n          0\n        );\n      } else {\n        throw new Error(\"[RenderTargetSystem] Unsupported texture target for framebuffer attachment.\");\n      }\n    });\n    if (glRenderTarget.msaa) {\n      const viewFramebuffer = gl.createFramebuffer();\n      glRenderTarget.framebuffer = viewFramebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((_, i) => {\n        const msaaRenderBuffer = gl.createRenderbuffer();\n        glRenderTarget.msaaRenderBuffer[i] = msaaRenderBuffer;\n      });\n    } else {\n      glRenderTarget.framebuffer = resolveTargetFramebuffer;\n    }\n    this._resizeColor(renderTarget, glRenderTarget);\n  }\n  _resizeColor(renderTarget, glRenderTarget) {\n    const source = renderTarget.colorTexture.source;\n    glRenderTarget.width = source.pixelWidth;\n    glRenderTarget.height = source.pixelHeight;\n    glRenderTarget._attachedMipLevel = 0;\n    glRenderTarget._attachedLayer = 0;\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      if (i === 0) return;\n      colorTexture.source.resize(source.width, source.height, source._resolution);\n    });\n    if (glRenderTarget.msaa) {\n      const renderer = this._renderer;\n      const gl = renderer.gl;\n      const viewFramebuffer = glRenderTarget.framebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const source2 = colorTexture.source;\n        renderer.texture.bindSource(source2, 0);\n        const glSource = renderer.texture.getGlSource(source2);\n        const glInternalFormat = glSource.internalFormat;\n        const msaaRenderBuffer = glRenderTarget.msaaRenderBuffer[i];\n        gl.bindRenderbuffer(\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n        gl.renderbufferStorageMultisample(\n          gl.RENDERBUFFER,\n          4,\n          glInternalFormat,\n          source2.pixelWidth,\n          source2.pixelHeight\n        );\n        gl.framebufferRenderbuffer(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n      });\n    }\n  }\n  _initStencil(glRenderTarget) {\n    if (glRenderTarget.framebuffer === null) return;\n    const gl = this._renderer.gl;\n    const depthStencilRenderBuffer = gl.createRenderbuffer();\n    glRenderTarget.depthStencilRenderBuffer = depthStencilRenderBuffer;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    gl.framebufferRenderbuffer(\n      gl.FRAMEBUFFER,\n      gl.DEPTH_STENCIL_ATTACHMENT,\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    this._resizeStencil(glRenderTarget);\n  }\n  _resizeStencil(glRenderTarget) {\n    const gl = this._renderer.gl;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      glRenderTarget.depthStencilRenderBuffer\n    );\n    if (glRenderTarget.msaa) {\n      gl.renderbufferStorageMultisample(\n        gl.RENDERBUFFER,\n        4,\n        gl.DEPTH24_STENCIL8,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    } else {\n      gl.renderbufferStorage(\n        gl.RENDERBUFFER,\n        this._renderer.context.webGLVersion === 2 ? gl.DEPTH24_STENCIL8 : gl.DEPTH_STENCIL,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    }\n  }\n  prerender(renderTarget) {\n    const resource = renderTarget.colorTexture.resource;\n    if (this._renderer.context.multiView && CanvasSource.test(resource)) {\n      this._renderer.context.ensureCanvasSize(resource);\n    }\n  }\n  postrender(renderTarget) {\n    if (!this._renderer.context.multiView) return;\n    if (CanvasSource.test(renderTarget.colorTexture.resource)) {\n      const contextCanvas = this._renderer.context.canvas;\n      const canvasSource = renderTarget.colorTexture;\n      canvasSource.context2D.drawImage(\n        contextCanvas,\n        0,\n        canvasSource.pixelHeight - contextCanvas.height\n      );\n    }\n  }\n  _setDrawBuffers(renderTarget, gl) {\n    const count = renderTarget.colorTextures.length;\n    const bufferArray = this._drawBuffersCache[count];\n    if (this._renderer.context.webGLVersion === 1) {\n      const ext = this._renderer.context.extensions.drawBuffers;\n      if (!ext) {\n        warn(\"[RenderTexture] This WebGL1 context does not support rendering to multiple targets\");\n      } else {\n        ext.drawBuffersWEBGL(bufferArray);\n      }\n    } else {\n      gl.drawBuffers(bufferArray);\n    }\n  }\n}\n\nexport { GlRenderTargetAdaptor };\n//# sourceMappingURL=GlRenderTargetAdaptor.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem.mjs';\nimport { GlRenderTargetAdaptor } from './GlRenderTargetAdaptor.mjs';\n\n\"use strict\";\nclass GlRenderTargetSystem extends RenderTargetSystem {\n  constructor(renderer) {\n    super(renderer);\n    this.adaptor = new GlRenderTargetAdaptor();\n    this.adaptor.init(renderer, this);\n  }\n}\n/** @ignore */\nGlRenderTargetSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"renderTarget\"\n};\n\nexport { GlRenderTargetSystem };\n//# sourceMappingURL=GlRenderTargetSystem.mjs.map\n","import { BufferResource } from '../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource.mjs';\n\n\"use strict\";\nfunction generateShaderSyncCode(shader, shaderSystem) {\n  const funcFragments = [];\n  const headerFragments = [`\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    `];\n  let addedTextreSystem = false;\n  let textureCount = 0;\n  const programData = shaderSystem._getProgramData(shader.glProgram);\n  for (const i in shader.groups) {\n    const group = shader.groups[i];\n    funcFragments.push(`\n            resources = g[${i}].resources;\n        `);\n    for (const j in group.resources) {\n      const resource = group.resources[j];\n      if (resource instanceof UniformGroup) {\n        if (resource.ubo) {\n          const resName = shader._uniformBindMap[i][Number(j)];\n          funcFragments.push(`\n                        sS.bindUniformBlock(\n                            resources[${j}],\n                            '${resName}',\n                            ${shader.glProgram._uniformBlockData[resName].index}\n                        );\n                    `);\n        } else {\n          funcFragments.push(`\n                        ugS.updateUniformGroup(resources[${j}], p, sD);\n                    `);\n        }\n      } else if (resource instanceof BufferResource) {\n        const resName = shader._uniformBindMap[i][Number(j)];\n        funcFragments.push(`\n                    sS.bindUniformBlock(\n                        resources[${j}],\n                        '${resName}',\n                        ${shader.glProgram._uniformBlockData[resName].index}\n                    );\n                `);\n      } else if (resource instanceof TextureSource) {\n        const uniformName = shader._uniformBindMap[i][j];\n        const uniformData = programData.uniformData[uniformName];\n        if (uniformData) {\n          if (!addedTextreSystem) {\n            addedTextreSystem = true;\n            headerFragments.push(`\n                        var tS = r.texture;\n                        `);\n          }\n          shaderSystem._gl.uniform1i(uniformData.location, textureCount);\n          funcFragments.push(`\n                        tS.bind(resources[${j}], ${textureCount});\n                    `);\n          textureCount++;\n        }\n      }\n    }\n  }\n  const functionSource = [...headerFragments, ...funcFragments].join(\"\\n\");\n  return new Function(\"r\", \"s\", \"sD\", functionSource);\n}\n\nexport { generateShaderSyncCode };\n//# sourceMappingURL=GenerateShaderSyncCode.mjs.map\n","\"use strict\";\nclass IGLUniformData {\n}\nclass GlProgramData {\n  /**\n   * Makes a new Pixi program.\n   * @param program - webgl program\n   * @param uniformData - uniforms\n   */\n  constructor(program, uniformData) {\n    this.program = program;\n    this.uniformData = uniformData;\n    this.uniformGroups = {};\n    this.uniformDirtyGroups = {};\n    this.uniformBlockBindings = {};\n  }\n  /** Destroys this program. */\n  destroy() {\n    this.uniformData = null;\n    this.uniformGroups = null;\n    this.uniformDirtyGroups = null;\n    this.uniformBlockBindings = null;\n    this.program = null;\n  }\n}\n\nexport { GlProgramData, IGLUniformData };\n//# sourceMappingURL=GlProgramData.mjs.map\n","\"use strict\";\nfunction compileShader(gl, type, src) {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  return shader;\n}\n\nexport { compileShader };\n//# sourceMappingURL=compileShader.mjs.map\n","\"use strict\";\nfunction booleanArray(size) {\n  const array = new Array(size);\n  for (let i = 0; i < array.length; i++) {\n    array[i] = false;\n  }\n  return array;\n}\nfunction defaultValue(type, size) {\n  switch (type) {\n    case \"float\":\n      return 0;\n    case \"vec2\":\n      return new Float32Array(2 * size);\n    case \"vec3\":\n      return new Float32Array(3 * size);\n    case \"vec4\":\n      return new Float32Array(4 * size);\n    case \"int\":\n    case \"uint\":\n    case \"sampler2D\":\n    case \"sampler2DArray\":\n      return 0;\n    case \"ivec2\":\n      return new Int32Array(2 * size);\n    case \"ivec3\":\n      return new Int32Array(3 * size);\n    case \"ivec4\":\n      return new Int32Array(4 * size);\n    case \"uvec2\":\n      return new Uint32Array(2 * size);\n    case \"uvec3\":\n      return new Uint32Array(3 * size);\n    case \"uvec4\":\n      return new Uint32Array(4 * size);\n    case \"bool\":\n      return false;\n    case \"bvec2\":\n      return booleanArray(2 * size);\n    case \"bvec3\":\n      return booleanArray(3 * size);\n    case \"bvec4\":\n      return booleanArray(4 * size);\n    case \"mat2\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { defaultValue };\n//# sourceMappingURL=defaultValue.mjs.map\n","\"use strict\";\nlet GL_TABLE = null;\nconst GL_TO_GLSL_TYPES = {\n  FLOAT: \"float\",\n  FLOAT_VEC2: \"vec2\",\n  FLOAT_VEC3: \"vec3\",\n  FLOAT_VEC4: \"vec4\",\n  INT: \"int\",\n  INT_VEC2: \"ivec2\",\n  INT_VEC3: \"ivec3\",\n  INT_VEC4: \"ivec4\",\n  UNSIGNED_INT: \"uint\",\n  UNSIGNED_INT_VEC2: \"uvec2\",\n  UNSIGNED_INT_VEC3: \"uvec3\",\n  UNSIGNED_INT_VEC4: \"uvec4\",\n  BOOL: \"bool\",\n  BOOL_VEC2: \"bvec2\",\n  BOOL_VEC3: \"bvec3\",\n  BOOL_VEC4: \"bvec4\",\n  FLOAT_MAT2: \"mat2\",\n  FLOAT_MAT3: \"mat3\",\n  FLOAT_MAT4: \"mat4\",\n  SAMPLER_2D: \"sampler2D\",\n  INT_SAMPLER_2D: \"sampler2D\",\n  UNSIGNED_INT_SAMPLER_2D: \"sampler2D\",\n  SAMPLER_CUBE: \"samplerCube\",\n  INT_SAMPLER_CUBE: \"samplerCube\",\n  UNSIGNED_INT_SAMPLER_CUBE: \"samplerCube\",\n  SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  INT_SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: \"sampler2DArray\"\n};\nconst GLSL_TO_VERTEX_TYPES = {\n  float: \"float32\",\n  vec2: \"float32x2\",\n  vec3: \"float32x3\",\n  vec4: \"float32x4\",\n  int: \"sint32\",\n  ivec2: \"sint32x2\",\n  ivec3: \"sint32x3\",\n  ivec4: \"sint32x4\",\n  uint: \"uint32\",\n  uvec2: \"uint32x2\",\n  uvec3: \"uint32x3\",\n  uvec4: \"uint32x4\",\n  bool: \"uint32\",\n  bvec2: \"uint32x2\",\n  bvec3: \"uint32x3\",\n  bvec4: \"uint32x4\"\n};\nfunction mapType(gl, type) {\n  if (!GL_TABLE) {\n    const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n    GL_TABLE = {};\n    for (let i = 0; i < typeNames.length; ++i) {\n      const tn = typeNames[i];\n      GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n    }\n  }\n  return GL_TABLE[type];\n}\nfunction mapGlToVertexFormat(gl, type) {\n  const typeValue = mapType(gl, type);\n  return GLSL_TO_VERTEX_TYPES[typeValue] || \"float32\";\n}\n\nexport { mapGlToVertexFormat, mapType };\n//# sourceMappingURL=mapType.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { mapGlToVertexFormat } from './mapType.mjs';\n\n\"use strict\";\nfunction extractAttributesFromGlProgram(program, gl, sortAttributes = false) {\n  const attributes = {};\n  const totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n  for (let i = 0; i < totalAttributes; i++) {\n    const attribData = gl.getActiveAttrib(program, i);\n    if (attribData.name.startsWith(\"gl_\")) {\n      continue;\n    }\n    const format = mapGlToVertexFormat(gl, attribData.type);\n    attributes[attribData.name] = {\n      location: 0,\n      // set further down..\n      format,\n      stride: getAttributeInfoFromFormat(format).stride,\n      offset: 0,\n      instance: false,\n      start: 0\n    };\n  }\n  const keys = Object.keys(attributes);\n  if (sortAttributes) {\n    keys.sort((a, b) => a > b ? 1 : -1);\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = i;\n      gl.bindAttribLocation(program, i, keys[i]);\n    }\n    gl.linkProgram(program);\n  } else {\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = gl.getAttribLocation(program, keys[i]);\n    }\n  }\n  return attributes;\n}\n\nexport { extractAttributesFromGlProgram };\n//# sourceMappingURL=extractAttributesFromGlProgram.mjs.map\n","\"use strict\";\nfunction getUboData(program, gl) {\n  if (!gl.ACTIVE_UNIFORM_BLOCKS) return {};\n  const uniformBlocks = {};\n  const totalUniformsBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\n  for (let i = 0; i < totalUniformsBlocks; i++) {\n    const name = gl.getActiveUniformBlockName(program, i);\n    const uniformBlockIndex = gl.getUniformBlockIndex(program, name);\n    const size = gl.getActiveUniformBlockParameter(program, i, gl.UNIFORM_BLOCK_DATA_SIZE);\n    uniformBlocks[name] = {\n      name,\n      index: uniformBlockIndex,\n      size\n    };\n  }\n  return uniformBlocks;\n}\n\nexport { getUboData };\n//# sourceMappingURL=getUboData.mjs.map\n","import { defaultValue } from './defaultValue.mjs';\nimport { mapType } from './mapType.mjs';\n\n\"use strict\";\nfunction getUniformData(program, gl) {\n  const uniforms = {};\n  const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (let i = 0; i < totalUniforms; i++) {\n    const uniformData = gl.getActiveUniform(program, i);\n    const name = uniformData.name.replace(/\\[.*?\\]$/, \"\");\n    const isArray = !!uniformData.name.match(/\\[.*?\\]$/);\n    const type = mapType(gl, uniformData.type);\n    uniforms[name] = {\n      name,\n      index: i,\n      type,\n      size: uniformData.size,\n      isArray,\n      value: defaultValue(type, uniformData.size)\n    };\n  }\n  return uniforms;\n}\n\nexport { getUniformData };\n//# sourceMappingURL=getUniformData.mjs.map\n","\"use strict\";\nfunction logPrettyShaderError(gl, shader) {\n  const shaderSrc = gl.getShaderSource(shader).split(\"\\n\").map((line, index) => `${index}: ${line}`);\n  const shaderLog = gl.getShaderInfoLog(shader);\n  const splitShader = shaderLog.split(\"\\n\");\n  const dedupe = {};\n  const lineNumbers = splitShader.map((line) => parseFloat(line.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/, \"$1\"))).filter((n) => {\n    if (n && !dedupe[n]) {\n      dedupe[n] = true;\n      return true;\n    }\n    return false;\n  });\n  const logArgs = [\"\"];\n  lineNumbers.forEach((number) => {\n    shaderSrc[number - 1] = `%c${shaderSrc[number - 1]}%c`;\n    logArgs.push(\"background: #FF0000; color:#FFFFFF; font-size: 10px\", \"font-size: 10px\");\n  });\n  const fragmentSourceToLog = shaderSrc.join(\"\\n\");\n  logArgs[0] = fragmentSourceToLog;\n  console.error(shaderLog);\n  console.groupCollapsed(\"click to view full shader code\");\n  console.warn(...logArgs);\n  console.groupEnd();\n}\nfunction logProgramError(gl, program, vertexShader, fragmentShader) {\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, vertexShader);\n    }\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, fragmentShader);\n    }\n    console.error(\"PixiJS Error: Could not initialize shader.\");\n    if (gl.getProgramInfoLog(program) !== \"\") {\n      console.warn(\"PixiJS Warning: gl.getProgramInfoLog()\", gl.getProgramInfoLog(program));\n    }\n  }\n}\n\nexport { logProgramError };\n//# sourceMappingURL=logProgramError.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { GlProgramData } from '../GlProgramData.mjs';\nimport { compileShader } from './compileShader.mjs';\nimport { defaultValue } from './defaultValue.mjs';\nimport { extractAttributesFromGlProgram } from './extractAttributesFromGlProgram.mjs';\nimport { getUboData } from './getUboData.mjs';\nimport { getUniformData } from './getUniformData.mjs';\nimport { logProgramError } from './logProgramError.mjs';\n\n\"use strict\";\nfunction generateProgram(gl, program) {\n  const glVertShader = compileShader(gl, gl.VERTEX_SHADER, program.vertex);\n  const glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, program.fragment);\n  const webGLProgram = gl.createProgram();\n  gl.attachShader(webGLProgram, glVertShader);\n  gl.attachShader(webGLProgram, glFragShader);\n  const transformFeedbackVaryings = program.transformFeedbackVaryings;\n  if (transformFeedbackVaryings) {\n    if (typeof gl.transformFeedbackVaryings !== \"function\") {\n      warn(`TransformFeedback is not supported but TransformFeedbackVaryings are given.`);\n    } else {\n      gl.transformFeedbackVaryings(\n        webGLProgram,\n        transformFeedbackVaryings.names,\n        transformFeedbackVaryings.bufferMode === \"separate\" ? gl.SEPARATE_ATTRIBS : gl.INTERLEAVED_ATTRIBS\n      );\n    }\n  }\n  gl.linkProgram(webGLProgram);\n  if (!gl.getProgramParameter(webGLProgram, gl.LINK_STATUS)) {\n    logProgramError(gl, webGLProgram, glVertShader, glFragShader);\n  }\n  program._attributeData = extractAttributesFromGlProgram(\n    webGLProgram,\n    gl,\n    !/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m.test(program.vertex)\n  );\n  program._uniformData = getUniformData(webGLProgram, gl);\n  program._uniformBlockData = getUboData(webGLProgram, gl);\n  gl.deleteShader(glVertShader);\n  gl.deleteShader(glFragShader);\n  const uniformData = {};\n  for (const i in program._uniformData) {\n    const data = program._uniformData[i];\n    uniformData[i] = {\n      location: gl.getUniformLocation(webGLProgram, i),\n      value: defaultValue(data.type, data.size)\n    };\n  }\n  const glProgram = new GlProgramData(webGLProgram, uniformData);\n  return glProgram;\n}\n\nexport { generateProgram };\n//# sourceMappingURL=generateProgram.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateShaderSyncCode } from './GenerateShaderSyncCode.mjs';\nimport { generateProgram } from './program/generateProgram.mjs';\n\n\"use strict\";\nconst defaultSyncData = {\n  textureCount: 0,\n  blockIndex: 0\n};\nclass GlShaderSystem {\n  constructor(renderer) {\n    /** @internal */\n    this._activeProgram = null;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._shaderSyncFunctions = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._shaderSyncFunctions = /* @__PURE__ */ Object.create(null);\n    this._activeProgram = null;\n  }\n  /**\n   * Changes the current shader to the one given in parameter.\n   * @param shader - the new shader\n   * @param skipSync - false if the shader should automatically sync its uniforms.\n   * @returns the glProgram that belongs to the shader.\n   */\n  bind(shader, skipSync) {\n    this._setProgram(shader.glProgram);\n    if (skipSync) return;\n    defaultSyncData.textureCount = 0;\n    defaultSyncData.blockIndex = 0;\n    let syncFunction = this._shaderSyncFunctions[shader.glProgram._key];\n    if (!syncFunction) {\n      syncFunction = this._shaderSyncFunctions[shader.glProgram._key] = this._generateShaderSync(shader, this);\n    }\n    this._renderer.buffer.nextBindBase(!!shader.glProgram.transformFeedbackVaryings);\n    syncFunction(this._renderer, shader, defaultSyncData);\n  }\n  /**\n   * Updates the uniform group.\n   * @param uniformGroup - the uniform group to update\n   */\n  updateUniformGroup(uniformGroup) {\n    this._renderer.uniformGroup.updateUniformGroup(uniformGroup, this._activeProgram, defaultSyncData);\n  }\n  /**\n   * Binds a uniform block to the shader.\n   * @param uniformGroup - the uniform group to bind\n   * @param name - the name of the uniform block\n   * @param index - the index of the uniform block\n   */\n  bindUniformBlock(uniformGroup, name, index = 0) {\n    const bufferSystem = this._renderer.buffer;\n    const programData = this._getProgramData(this._activeProgram);\n    const isBufferResource = uniformGroup._bufferResource;\n    if (!isBufferResource) {\n      this._renderer.ubo.updateUniformGroup(uniformGroup);\n    }\n    const buffer = uniformGroup.buffer;\n    const glBuffer = bufferSystem.updateBuffer(buffer);\n    const boundLocation = bufferSystem.freeLocationForBufferBase(glBuffer);\n    if (isBufferResource) {\n      const { offset, size } = uniformGroup;\n      if (offset === 0 && size === buffer.data.byteLength) {\n        bufferSystem.bindBufferBase(glBuffer, boundLocation);\n      } else {\n        bufferSystem.bindBufferRange(glBuffer, boundLocation, offset);\n      }\n    } else if (bufferSystem.getLastBindBaseLocation(glBuffer) !== boundLocation) {\n      bufferSystem.bindBufferBase(glBuffer, boundLocation);\n    }\n    const uniformBlockIndex = this._activeProgram._uniformBlockData[name].index;\n    if (programData.uniformBlockBindings[index] === boundLocation) return;\n    programData.uniformBlockBindings[index] = boundLocation;\n    this._renderer.gl.uniformBlockBinding(programData.program, uniformBlockIndex, boundLocation);\n  }\n  _setProgram(program) {\n    if (this._activeProgram === program) return;\n    this._activeProgram = program;\n    const programData = this._getProgramData(program);\n    this._gl.useProgram(programData.program);\n  }\n  /**\n   * @param program - the program to get the data for\n   * @internal\n   */\n  _getProgramData(program) {\n    return this._programDataHash[program._key] || this._createProgramData(program);\n  }\n  _createProgramData(program) {\n    const key = program._key;\n    this._programDataHash[key] = generateProgram(this._gl, program);\n    return this._programDataHash[key];\n  }\n  destroy() {\n    for (const key of Object.keys(this._programDataHash)) {\n      this._programDataHash[key].destroy();\n    }\n    this._programDataHash = null;\n    this._shaderSyncFunctions = null;\n    this._activeProgram = null;\n    this._renderer = null;\n    this._gl = null;\n  }\n  /**\n   * Creates a function that can be executed that will sync the shader as efficiently as possible.\n   * Overridden by the unsafe eval package if you don't want eval used in your project.\n   * @param shader - the shader to generate the sync function for\n   * @param shaderSystem - the shader system to use\n   * @returns - the generated sync function\n   * @ignore\n   */\n  _generateShaderSync(shader, shaderSystem) {\n    return generateShaderSyncCode(shader, shaderSystem);\n  }\n  resetState() {\n    this._activeProgram = null;\n  }\n}\n/** @ignore */\nGlShaderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"shader\"\n};\n\nexport { GlShaderSystem };\n//# sourceMappingURL=GlShaderSystem.mjs.map\n","\"use strict\";\nconst UNIFORM_TO_SINGLE_SETTERS = {\n  f32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }`,\n  \"vec2<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }`,\n  \"vec3<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }`,\n  i32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  u32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }`,\n  \"vec2<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }`,\n  \"vec3<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }`,\n  bool: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`\n};\nconst UNIFORM_TO_ARRAY_SETTERS = {\n  f32: `gl.uniform1fv(location, v);`,\n  \"vec2<f32>\": `gl.uniform2fv(location, v);`,\n  \"vec3<f32>\": `gl.uniform3fv(location, v);`,\n  \"vec4<f32>\": `gl.uniform4fv(location, v);`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`,\n  i32: `gl.uniform1iv(location, v);`,\n  \"vec2<i32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<i32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<i32>\": `gl.uniform4iv(location, v);`,\n  u32: `gl.uniform1iv(location, v);`,\n  \"vec2<u32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<u32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<u32>\": `gl.uniform4iv(location, v);`,\n  bool: `gl.uniform1iv(location, v);`,\n  \"vec2<bool>\": `gl.uniform2iv(location, v);`,\n  \"vec3<bool>\": `gl.uniform3iv(location, v);`,\n  \"vec4<bool>\": `gl.uniform4iv(location, v);`\n};\n\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS };\n//# sourceMappingURL=generateUniformsSyncTypes.mjs.map\n","import { BufferResource } from '../../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../../shared/shader/UniformGroup.mjs';\nimport { uniformParsers } from '../../../shared/shader/utils/uniformParsers.mjs';\nimport { UNIFORM_TO_SINGLE_SETTERS, UNIFORM_TO_ARRAY_SETTERS } from './generateUniformsSyncTypes.mjs';\n\n\"use strict\";\nfunction generateUniformsSync(group, uniformData) {\n  const funcFragments = [`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    `];\n  for (const i in group.uniforms) {\n    if (!uniformData[i]) {\n      if (group.uniforms[i] instanceof UniformGroup) {\n        if (group.uniforms[i].ubo) {\n          funcFragments.push(`\n                        renderer.shader.bindUniformBlock(uv.${i}, \"${i}\");\n                    `);\n        } else {\n          funcFragments.push(`\n                        renderer.shader.updateUniformGroup(uv.${i});\n                    `);\n        }\n      } else if (group.uniforms[i] instanceof BufferResource) {\n        funcFragments.push(`\n                        renderer.shader.bindBufferResource(uv.${i}, \"${i}\");\n                    `);\n      }\n      continue;\n    }\n    const uniform = group.uniformStructures[i];\n    let parsed = false;\n    for (let j = 0; j < uniformParsers.length; j++) {\n      const parser = uniformParsers[j];\n      if (uniform.type === parser.type && parser.test(uniform)) {\n        funcFragments.push(`name = \"${i}\";`, uniformParsers[j].uniform);\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      const templateType = uniform.size === 1 ? UNIFORM_TO_SINGLE_SETTERS : UNIFORM_TO_ARRAY_SETTERS;\n      const template = templateType[uniform.type].replace(\"location\", `ud[\"${i}\"].location`);\n      funcFragments.push(`\n            cu = ud[\"${i}\"];\n            cv = cu.value;\n            v = uv[\"${i}\"];\n            ${template};`);\n    }\n  }\n  return new Function(\"ud\", \"uv\", \"renderer\", \"syncData\", funcFragments.join(\"\\n\"));\n}\n\nexport { generateUniformsSync };\n//# sourceMappingURL=generateUniformsSync.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateUniformsSync } from './utils/generateUniformsSync.mjs';\n\n\"use strict\";\nclass GlUniformGroupSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /** Cache to holds the generated functions. Stored against UniformObjects unique signature. */\n    this._cache = {};\n    this._uniformGroupSyncHash = {};\n    this._renderer = renderer;\n    this.gl = null;\n    this._cache = {};\n  }\n  contextChange(gl) {\n    this.gl = gl;\n  }\n  /**\n   * Uploads the uniforms values to the currently bound shader.\n   * @param group - the uniforms values that be applied to the current shader\n   * @param program\n   * @param syncData\n   * @param syncData.textureCount\n   */\n  updateUniformGroup(group, program, syncData) {\n    const programData = this._renderer.shader._getProgramData(program);\n    if (!group.isStatic || group._dirtyId !== programData.uniformDirtyGroups[group.uid]) {\n      programData.uniformDirtyGroups[group.uid] = group._dirtyId;\n      const syncFunc = this._getUniformSyncFunction(group, program);\n      syncFunc(programData.uniformData, group.uniforms, this._renderer, syncData);\n    }\n  }\n  /**\n   * Overridable by the pixi.js/unsafe-eval package to use static syncUniforms instead.\n   * @param group\n   * @param program\n   */\n  _getUniformSyncFunction(group, program) {\n    return this._uniformGroupSyncHash[group._signature]?.[program._key] || this._createUniformSyncFunction(group, program);\n  }\n  _createUniformSyncFunction(group, program) {\n    const uniformGroupSyncHash = this._uniformGroupSyncHash[group._signature] || (this._uniformGroupSyncHash[group._signature] = {});\n    const id = this._getSignature(group, program._uniformData, \"u\");\n    if (!this._cache[id]) {\n      this._cache[id] = this._generateUniformsSync(group, program._uniformData);\n    }\n    uniformGroupSyncHash[program._key] = this._cache[id];\n    return uniformGroupSyncHash[program._key];\n  }\n  _generateUniformsSync(group, uniformData) {\n    return generateUniformsSync(group, uniformData);\n  }\n  /**\n   * Takes a uniform group and data and generates a unique signature for them.\n   * @param group - The uniform group to get signature of\n   * @param group.uniforms\n   * @param uniformData - Uniform information generated by the shader\n   * @param preFix\n   * @returns Unique signature of the uniform group\n   */\n  _getSignature(group, uniformData, preFix) {\n    const uniforms = group.uniforms;\n    const strings = [`${preFix}-`];\n    for (const i in uniforms) {\n      strings.push(i);\n      if (uniformData[i]) {\n        strings.push(uniformData[i].type);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  /** Destroys this System and removes all its textures. */\n  destroy() {\n    this._renderer = null;\n    this._cache = null;\n  }\n}\n/** @ignore */\nGlUniformGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"uniformGroup\"\n};\n\nexport { GlUniformGroupSystem };\n//# sourceMappingURL=GlUniformGroupSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\n\n\"use strict\";\nfunction mapWebGLBlendModesToPixi(gl) {\n  const blendMap = {};\n  blendMap.normal = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.add = [gl.ONE, gl.ONE];\n  blendMap.multiply = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.screen = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.none = [0, 0];\n  blendMap[\"normal-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap[\"add-npm\"] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];\n  blendMap[\"screen-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.erase = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n  const isWebGl2 = !(gl instanceof DOMAdapter.get().getWebGLRenderingContext());\n  if (isWebGl2) {\n    blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MIN, gl.MIN];\n    blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MAX, gl.MAX];\n  } else {\n    const ext = gl.getExtension(\"EXT_blend_minmax\");\n    if (ext) {\n      blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MIN_EXT, ext.MIN_EXT];\n      blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MAX_EXT, ext.MAX_EXT];\n    }\n  }\n  return blendMap;\n}\n\nexport { mapWebGLBlendModesToPixi };\n//# sourceMappingURL=mapWebGLBlendModesToPixi.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { State } from '../../shared/state/State.mjs';\nimport { mapWebGLBlendModesToPixi } from './mapWebGLBlendModesToPixi.mjs';\n\n\"use strict\";\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _GlStateSystem = class _GlStateSystem {\n  constructor(renderer) {\n    /**\n     * Whether to invert the front face when rendering\n     * This is used for render textures where the Y-coordinate is flipped\n     * @default false\n     */\n    this._invertFrontFace = false;\n    this.gl = null;\n    this.stateId = 0;\n    this.polygonOffset = 0;\n    this.blendMode = \"none\";\n    this._blendEq = false;\n    this.map = [];\n    this.map[BLEND] = this.setBlend;\n    this.map[OFFSET] = this.setOffset;\n    this.map[CULLING] = this.setCullFace;\n    this.map[DEPTH_TEST] = this.setDepthTest;\n    this.map[WINDING] = this.setFrontFace;\n    this.map[DEPTH_MASK] = this.setDepthMask;\n    this.checks = [];\n    this.defaultState = State.for2d();\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  onRenderTargetChange(renderTarget) {\n    this._invertFrontFace = !renderTarget.isRoot;\n    if (this._cullFace) {\n      this.setFrontFace(this._frontFace);\n    } else {\n      this._frontFaceDirty = true;\n    }\n  }\n  contextChange(gl) {\n    this.gl = gl;\n    this.blendModesMap = mapWebGLBlendModesToPixi(gl);\n    this.resetState();\n  }\n  /**\n   * Sets the current state\n   * @param {*} state - The state to set.\n   */\n  set(state) {\n    state || (state = this.defaultState);\n    if (this.stateId !== state.data) {\n      let diff = this.stateId ^ state.data;\n      let i = 0;\n      while (diff) {\n        if (diff & 1) {\n          this.map[i].call(this, !!(state.data & 1 << i));\n        }\n        diff >>= 1;\n        i++;\n      }\n      this.stateId = state.data;\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n  }\n  /**\n   * Sets the state, when previous state is unknown.\n   * @param {*} state - The state to set\n   */\n  forceState(state) {\n    state || (state = this.defaultState);\n    for (let i = 0; i < this.map.length; i++) {\n      this.map[i].call(this, !!(state.data & 1 << i));\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n    this.stateId = state.data;\n  }\n  /**\n   * Sets whether to enable or disable blending.\n   * @param value - Turn on or off WebGl blending.\n   */\n  setBlend(value) {\n    this._updateCheck(_GlStateSystem._checkBlendMode, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.BLEND);\n  }\n  /**\n   * Sets whether to enable or disable polygon offset fill.\n   * @param value - Turn on or off webgl polygon offset testing.\n   */\n  setOffset(value) {\n    this._updateCheck(_GlStateSystem._checkPolygonOffset, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.POLYGON_OFFSET_FILL);\n  }\n  /**\n   * Sets whether to enable or disable depth test.\n   * @param value - Turn on or off webgl depth testing.\n   */\n  setDepthTest(value) {\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.DEPTH_TEST);\n  }\n  /**\n   * Sets whether to enable or disable depth mask.\n   * @param value - Turn on or off webgl depth mask.\n   */\n  setDepthMask(value) {\n    this.gl.depthMask(value);\n  }\n  /**\n   * Sets whether to enable or disable cull face.\n   * @param {boolean} value - Turn on or off webgl cull face.\n   */\n  setCullFace(value) {\n    this._cullFace = value;\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.CULL_FACE);\n    if (this._cullFace && this._frontFaceDirty) {\n      this.setFrontFace(this._frontFace);\n    }\n  }\n  /**\n   * Sets the gl front face.\n   * @param {boolean} value - true is clockwise and false is counter-clockwise\n   */\n  setFrontFace(value) {\n    this._frontFace = value;\n    this._frontFaceDirty = false;\n    const faceMode = this._invertFrontFace ? !value : value;\n    if (this._glFrontFace !== faceMode) {\n      this._glFrontFace = faceMode;\n      this.gl.frontFace(this.gl[faceMode ? \"CW\" : \"CCW\"]);\n    }\n  }\n  /**\n   * Sets the blend mode.\n   * @param {number} value - The blend mode to set to.\n   */\n  setBlendMode(value) {\n    if (!this.blendModesMap[value]) {\n      value = \"normal\";\n    }\n    if (value === this.blendMode) {\n      return;\n    }\n    this.blendMode = value;\n    const mode = this.blendModesMap[value];\n    const gl = this.gl;\n    if (mode.length === 2) {\n      gl.blendFunc(mode[0], mode[1]);\n    } else {\n      gl.blendFuncSeparate(mode[0], mode[1], mode[2], mode[3]);\n    }\n    if (mode.length === 6) {\n      this._blendEq = true;\n      gl.blendEquationSeparate(mode[4], mode[5]);\n    } else if (this._blendEq) {\n      this._blendEq = false;\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n    }\n  }\n  /**\n   * Sets the polygon offset.\n   * @param {number} value - the polygon offset\n   * @param {number} scale - the polygon offset scale\n   */\n  setPolygonOffset(value, scale) {\n    this.gl.polygonOffset(value, scale);\n  }\n  /** Resets all the logic and disables the VAOs. */\n  resetState() {\n    this._glFrontFace = false;\n    this._frontFace = false;\n    this._cullFace = false;\n    this._frontFaceDirty = false;\n    this._invertFrontFace = false;\n    this.gl.frontFace(this.gl.CCW);\n    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false);\n    this.forceState(this.defaultState);\n    this._blendEq = true;\n    this.blendMode = \"\";\n    this.setBlendMode(\"normal\");\n  }\n  /**\n   * Checks to see which updates should be checked based on which settings have been activated.\n   *\n   * For example, if blend is enabled then we should check the blend modes each time the state is changed\n   * or if polygon fill is activated then we need to check if the polygon offset changes.\n   * The idea is that we only check what we have too.\n   * @param func - the checking function to add or remove\n   * @param value - should the check function be added or removed.\n   */\n  _updateCheck(func, value) {\n    const index = this.checks.indexOf(func);\n    if (value && index === -1) {\n      this.checks.push(func);\n    } else if (!value && index !== -1) {\n      this.checks.splice(index, 1);\n    }\n  }\n  /**\n   * A private little wrapper function that we call to check the blend mode.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkBlendMode(system, state) {\n    system.setBlendMode(state.blendMode);\n  }\n  /**\n   * A private little wrapper function that we call to check the polygon offset.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkPolygonOffset(system, state) {\n    system.setPolygonOffset(1, state.polygonOffset);\n  }\n  /** @ignore */\n  destroy() {\n    this.gl = null;\n    this.checks.length = 0;\n  }\n};\n/** @ignore */\n_GlStateSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"state\"\n};\nlet GlStateSystem = _GlStateSystem;\n\nexport { GlStateSystem };\n//# sourceMappingURL=GlStateSystem.mjs.map\n","import { GL_TARGETS, GL_TYPES, GL_FORMATS } from './const.mjs';\n\n\"use strict\";\nclass GlTexture {\n  constructor(texture) {\n    this.target = GL_TARGETS.TEXTURE_2D;\n    /**\n     * Bitmask tracking which array layers / sub-targets have been initialized at mip level 0.\n     * Used by uploaders that need per-layer allocation semantics (e.g. cube faces).\n     * @internal\n     */\n    this._layerInitMask = 0;\n    this.texture = texture;\n    this.width = -1;\n    this.height = -1;\n    this.type = GL_TYPES.UNSIGNED_BYTE;\n    this.internalFormat = GL_FORMATS.RGBA;\n    this.format = GL_FORMATS.RGBA;\n    this.samplerType = 0;\n  }\n  destroy() {\n  }\n}\n\nexport { GlTexture };\n//# sourceMappingURL=GlTexture.mjs.map\n","\"use strict\";\nconst glUploadBufferImageResource = {\n  id: \"buffer\",\n  upload(source, glTexture, gl, _webGLVersion, targetOverride, forceAllocation = false) {\n    const target = targetOverride || glTexture.target;\n    if (!forceAllocation && (glTexture.width === source.width && glTexture.height === source.height)) {\n      gl.texSubImage2D(\n        target,\n        0,\n        0,\n        0,\n        source.width,\n        source.height,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else {\n      gl.texImage2D(\n        target,\n        0,\n        glTexture.internalFormat,\n        source.width,\n        source.height,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    }\n    glTexture.width = source.width;\n    glTexture.height = source.height;\n  }\n};\n\nexport { glUploadBufferImageResource };\n//# sourceMappingURL=glUploadBufferImageResource.mjs.map\n","\"use strict\";\nconst compressedFormatMap = {\n  \"bc1-rgba-unorm\": true,\n  \"bc1-rgba-unorm-srgb\": true,\n  \"bc2-rgba-unorm\": true,\n  \"bc2-rgba-unorm-srgb\": true,\n  \"bc3-rgba-unorm\": true,\n  \"bc3-rgba-unorm-srgb\": true,\n  \"bc4-r-unorm\": true,\n  \"bc4-r-snorm\": true,\n  \"bc5-rg-unorm\": true,\n  \"bc5-rg-snorm\": true,\n  \"bc6h-rgb-ufloat\": true,\n  \"bc6h-rgb-float\": true,\n  \"bc7-rgba-unorm\": true,\n  \"bc7-rgba-unorm-srgb\": true,\n  // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"etc2-rgb8unorm\": true,\n  \"etc2-rgb8unorm-srgb\": true,\n  \"etc2-rgb8a1unorm\": true,\n  \"etc2-rgb8a1unorm-srgb\": true,\n  \"etc2-rgba8unorm\": true,\n  \"etc2-rgba8unorm-srgb\": true,\n  \"eac-r11unorm\": true,\n  \"eac-r11snorm\": true,\n  \"eac-rg11unorm\": true,\n  \"eac-rg11snorm\": true,\n  // ASTC compressed formats usable if \"texture-compression-astc\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"astc-4x4-unorm\": true,\n  \"astc-4x4-unorm-srgb\": true,\n  \"astc-5x4-unorm\": true,\n  \"astc-5x4-unorm-srgb\": true,\n  \"astc-5x5-unorm\": true,\n  \"astc-5x5-unorm-srgb\": true,\n  \"astc-6x5-unorm\": true,\n  \"astc-6x5-unorm-srgb\": true,\n  \"astc-6x6-unorm\": true,\n  \"astc-6x6-unorm-srgb\": true,\n  \"astc-8x5-unorm\": true,\n  \"astc-8x5-unorm-srgb\": true,\n  \"astc-8x6-unorm\": true,\n  \"astc-8x6-unorm-srgb\": true,\n  \"astc-8x8-unorm\": true,\n  \"astc-8x8-unorm-srgb\": true,\n  \"astc-10x5-unorm\": true,\n  \"astc-10x5-unorm-srgb\": true,\n  \"astc-10x6-unorm\": true,\n  \"astc-10x6-unorm-srgb\": true,\n  \"astc-10x8-unorm\": true,\n  \"astc-10x8-unorm-srgb\": true,\n  \"astc-10x10-unorm\": true,\n  \"astc-10x10-unorm-srgb\": true,\n  \"astc-12x10-unorm\": true,\n  \"astc-12x10-unorm-srgb\": true,\n  \"astc-12x12-unorm\": true,\n  \"astc-12x12-unorm-srgb\": true\n};\nconst glUploadCompressedTextureResource = {\n  id: \"compressed\",\n  upload(source, glTexture, gl, _webGLVersion, targetOverride, _forceAllocation) {\n    const target = targetOverride ?? glTexture.target;\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);\n    let mipWidth = source.pixelWidth;\n    let mipHeight = source.pixelHeight;\n    const compressed = !!compressedFormatMap[source.format];\n    for (let i = 0; i < source.resource.length; i++) {\n      const levelBuffer = source.resource[i];\n      if (compressed) {\n        gl.compressedTexImage2D(\n          target,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          levelBuffer\n        );\n      } else {\n        gl.texImage2D(\n          target,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          glTexture.format,\n          glTexture.type,\n          levelBuffer\n        );\n      }\n      mipWidth = Math.max(mipWidth >> 1, 1);\n      mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n  }\n};\n\nexport { glUploadCompressedTextureResource };\n//# sourceMappingURL=glUploadCompressedTextureResource.mjs.map\n","import { GL_TARGETS } from '../const.mjs';\n\n\"use strict\";\nconst FACE_ORDER = [\"right\", \"left\", \"top\", \"bottom\", \"front\", \"back\"];\nfunction createGlUploadCubeTextureResource(uploaders) {\n  return {\n    id: \"cube\",\n    upload(source, glTexture, gl, webGLVersion) {\n      const faces = source.faces;\n      for (let faceIndex = 0; faceIndex < FACE_ORDER.length; faceIndex++) {\n        const key = FACE_ORDER[faceIndex];\n        const face = faces[key];\n        const uploader = uploaders[face.uploadMethodId] || uploaders.image;\n        uploader.upload(\n          face,\n          glTexture,\n          gl,\n          webGLVersion,\n          // Use the face target for the current face. cube faces ids go up 1 so\n          // GL_TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + i addresses the i'th face target.\n          GL_TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex,\n          // Force allocation for the first upload of each face.\n          (glTexture._layerInitMask & 1 << faceIndex) === 0\n        );\n        glTexture._layerInitMask |= 1 << faceIndex;\n      }\n      glTexture.width = source.pixelWidth;\n      glTexture.height = source.pixelHeight;\n    }\n  };\n}\n\nexport { createGlUploadCubeTextureResource };\n//# sourceMappingURL=glUploadCubeTextureResource.mjs.map\n","\"use strict\";\nconst glUploadImageResource = {\n  id: \"image\",\n  upload(source, glTexture, gl, webGLVersion, targetOverride, forceAllocation = false) {\n    const target = targetOverride || glTexture.target;\n    const textureWidth = source.pixelWidth;\n    const textureHeight = source.pixelHeight;\n    const resourceWidth = source.resourceWidth;\n    const resourceHeight = source.resourceHeight;\n    const isWebGL2 = webGLVersion === 2;\n    const needsAllocation = forceAllocation || glTexture.width !== textureWidth || glTexture.height !== textureHeight;\n    const resourceFitsTexture = resourceWidth >= textureWidth && resourceHeight >= textureHeight;\n    const resource = source.resource;\n    const uploadFunction = isWebGL2 ? uploadImageWebGL2 : uploadImageWebGL1;\n    uploadFunction(\n      gl,\n      target,\n      glTexture,\n      textureWidth,\n      textureHeight,\n      resourceWidth,\n      resourceHeight,\n      resource,\n      needsAllocation,\n      resourceFitsTexture\n    );\n    glTexture.width = textureWidth;\n    glTexture.height = textureHeight;\n  }\n};\nfunction uploadImageWebGL2(gl, target, glTexture, textureWidth, textureHeight, resourceWidth, resourceHeight, resource, needsAllocation, resourceFitsTexture) {\n  if (!resourceFitsTexture) {\n    if (needsAllocation) {\n      gl.texImage2D(\n        target,\n        0,\n        glTexture.internalFormat,\n        textureWidth,\n        textureHeight,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n    }\n    gl.texSubImage2D(\n      target,\n      0,\n      0,\n      0,\n      resourceWidth,\n      resourceHeight,\n      glTexture.format,\n      glTexture.type,\n      resource\n    );\n    return;\n  }\n  if (!needsAllocation) {\n    gl.texSubImage2D(\n      target,\n      0,\n      0,\n      0,\n      glTexture.format,\n      glTexture.type,\n      resource\n    );\n    return;\n  }\n  gl.texImage2D(\n    target,\n    0,\n    glTexture.internalFormat,\n    textureWidth,\n    textureHeight,\n    0,\n    glTexture.format,\n    glTexture.type,\n    resource\n  );\n}\nfunction uploadImageWebGL1(gl, target, glTexture, textureWidth, textureHeight, _resourceWidth, _resourceHeight, resource, needsAllocation, resourceFitsTexture) {\n  if (!resourceFitsTexture) {\n    if (needsAllocation) {\n      gl.texImage2D(\n        target,\n        0,\n        glTexture.internalFormat,\n        textureWidth,\n        textureHeight,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n    }\n    gl.texSubImage2D(\n      target,\n      0,\n      0,\n      0,\n      glTexture.format,\n      glTexture.type,\n      resource\n    );\n    return;\n  }\n  if (!needsAllocation) {\n    gl.texSubImage2D(\n      target,\n      0,\n      0,\n      0,\n      glTexture.format,\n      glTexture.type,\n      resource\n    );\n    return;\n  }\n  gl.texImage2D(\n    target,\n    0,\n    glTexture.internalFormat,\n    glTexture.format,\n    glTexture.type,\n    resource\n  );\n}\n\nexport { glUploadImageResource };\n//# sourceMappingURL=glUploadImageResource.mjs.map\n","import { isSafari } from '../../../../../utils/browser/isSafari.mjs';\nimport { glUploadImageResource } from './glUploadImageResource.mjs';\n\n\"use strict\";\nconst defaultForceAllocation = isSafari();\nconst glUploadVideoResource = {\n  id: \"video\",\n  upload(source, glTexture, gl, webGLVersion, targetOverride, forceAllocation = defaultForceAllocation) {\n    if (!source.isValid) {\n      const target = targetOverride ?? glTexture.target;\n      gl.texImage2D(\n        target,\n        0,\n        glTexture.internalFormat,\n        1,\n        1,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n      return;\n    }\n    glUploadImageResource.upload(source, glTexture, gl, webGLVersion, targetOverride, forceAllocation);\n  }\n};\n\nexport { glUploadVideoResource };\n//# sourceMappingURL=glUploadVideoResource.mjs.map\n","\"use strict\";\nconst scaleModeToGlFilter = {\n  linear: 9729,\n  nearest: 9728\n};\nconst mipmapScaleModeToGlFilter = {\n  linear: {\n    linear: 9987,\n    nearest: 9985\n  },\n  nearest: {\n    linear: 9986,\n    nearest: 9984\n  }\n};\nconst wrapModeToGlAddress = {\n  \"clamp-to-edge\": 33071,\n  repeat: 10497,\n  \"mirror-repeat\": 33648\n};\nconst compareModeToGlCompare = {\n  never: 512,\n  less: 513,\n  equal: 514,\n  \"less-equal\": 515,\n  greater: 516,\n  \"not-equal\": 517,\n  \"greater-equal\": 518,\n  always: 519\n};\n\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress };\n//# sourceMappingURL=pixiToGlMaps.mjs.map\n","import { wrapModeToGlAddress, scaleModeToGlFilter, mipmapScaleModeToGlFilter, compareModeToGlCompare } from './pixiToGlMaps.mjs';\n\n\"use strict\";\nfunction applyStyleParams(style, gl, mipmaps, anisotropicExt, glFunctionName, firstParam, forceClamp, firstCreation) {\n  const castParam = firstParam;\n  if (!firstCreation || style.addressModeU !== \"repeat\" || style.addressModeV !== \"repeat\" || style.addressModeW !== \"repeat\") {\n    const wrapModeS = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeU];\n    const wrapModeT = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeV];\n    const wrapModeR = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeW];\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_S, wrapModeS);\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_T, wrapModeT);\n    if (gl.TEXTURE_WRAP_R) gl[glFunctionName](castParam, gl.TEXTURE_WRAP_R, wrapModeR);\n  }\n  if (!firstCreation || style.magFilter !== \"linear\") {\n    gl[glFunctionName](castParam, gl.TEXTURE_MAG_FILTER, scaleModeToGlFilter[style.magFilter]);\n  }\n  if (mipmaps) {\n    if (!firstCreation || style.mipmapFilter !== \"linear\") {\n      const glFilterMode = mipmapScaleModeToGlFilter[style.minFilter][style.mipmapFilter];\n      gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, glFilterMode);\n    }\n  } else {\n    gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, scaleModeToGlFilter[style.minFilter]);\n  }\n  if (anisotropicExt && style.maxAnisotropy > 1) {\n    const level = Math.min(style.maxAnisotropy, gl.getParameter(anisotropicExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n    gl[glFunctionName](castParam, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, level);\n  }\n  if (style.compare) {\n    gl[glFunctionName](castParam, gl.TEXTURE_COMPARE_FUNC, compareModeToGlCompare[style.compare]);\n  }\n}\n\nexport { applyStyleParams };\n//# sourceMappingURL=applyStyleParams.mjs.map\n","\"use strict\";\nfunction mapFormatToGlFormat(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.RED,\n    r8snorm: gl.RED,\n    r8uint: gl.RED,\n    r8sint: gl.RED,\n    // 16-bit formats\n    r16uint: gl.RED,\n    r16sint: gl.RED,\n    r16float: gl.RED,\n    rg8unorm: gl.RG,\n    rg8snorm: gl.RG,\n    rg8uint: gl.RG,\n    rg8sint: gl.RG,\n    // 32-bit formats\n    r32uint: gl.RED,\n    r32sint: gl.RED,\n    r32float: gl.RED,\n    rg16uint: gl.RG,\n    rg16sint: gl.RG,\n    rg16float: gl.RG,\n    rgba8unorm: gl.RGBA,\n    \"rgba8unorm-srgb\": gl.RGBA,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA,\n    rgba8uint: gl.RGBA,\n    rgba8sint: gl.RGBA,\n    bgra8unorm: gl.RGBA,\n    \"bgra8unorm-srgb\": gl.RGBA,\n    rgb9e5ufloat: gl.RGB,\n    rgb10a2unorm: gl.RGBA,\n    rg11b10ufloat: gl.RGB,\n    // 64-bit formats\n    rg32uint: gl.RG,\n    rg32sint: gl.RG,\n    rg32float: gl.RG,\n    rgba16uint: gl.RGBA,\n    rgba16sint: gl.RGBA,\n    rgba16float: gl.RGBA,\n    // 128-bit formats\n    rgba32uint: gl.RGBA,\n    rgba32sint: gl.RGBA,\n    rgba32float: gl.RGBA,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT,\n    depth24plus: gl.DEPTH_COMPONENT,\n    \"depth24plus-stencil8\": gl.DEPTH_STENCIL,\n    depth32float: gl.DEPTH_COMPONENT,\n    \"depth32float-stencil8\": gl.DEPTH_STENCIL\n  };\n}\n\nexport { mapFormatToGlFormat };\n//# sourceMappingURL=mapFormatToGlFormat.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nfunction mapFormatToGlInternalFormat(gl, extensions) {\n  let srgb = {};\n  let bgra8unorm = gl.RGBA;\n  if (!(gl instanceof DOMAdapter.get().getWebGLRenderingContext())) {\n    srgb = {\n      \"rgba8unorm-srgb\": gl.SRGB8_ALPHA8,\n      \"bgra8unorm-srgb\": gl.SRGB8_ALPHA8\n    };\n    bgra8unorm = gl.RGBA8;\n  } else if (extensions.srgb) {\n    srgb = {\n      \"rgba8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT,\n      \"bgra8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT\n    };\n  }\n  return {\n    // 8-bit formats\n    r8unorm: gl.R8,\n    r8snorm: gl.R8_SNORM,\n    r8uint: gl.R8UI,\n    r8sint: gl.R8I,\n    // 16-bit formats\n    r16uint: gl.R16UI,\n    r16sint: gl.R16I,\n    r16float: gl.R16F,\n    rg8unorm: gl.RG8,\n    rg8snorm: gl.RG8_SNORM,\n    rg8uint: gl.RG8UI,\n    rg8sint: gl.RG8I,\n    // 32-bit formats\n    r32uint: gl.R32UI,\n    r32sint: gl.R32I,\n    r32float: gl.R32F,\n    rg16uint: gl.RG16UI,\n    rg16sint: gl.RG16I,\n    rg16float: gl.RG16F,\n    rgba8unorm: gl.RGBA,\n    ...srgb,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA8_SNORM,\n    rgba8uint: gl.RGBA8UI,\n    rgba8sint: gl.RGBA8I,\n    bgra8unorm,\n    rgb9e5ufloat: gl.RGB9_E5,\n    rgb10a2unorm: gl.RGB10_A2,\n    rg11b10ufloat: gl.R11F_G11F_B10F,\n    // 64-bit formats\n    rg32uint: gl.RG32UI,\n    rg32sint: gl.RG32I,\n    rg32float: gl.RG32F,\n    rgba16uint: gl.RGBA16UI,\n    rgba16sint: gl.RGBA16I,\n    rgba16float: gl.RGBA16F,\n    // 128-bit formats\n    rgba32uint: gl.RGBA32UI,\n    rgba32sint: gl.RGBA32I,\n    rgba32float: gl.RGBA32F,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT16,\n    depth24plus: gl.DEPTH_COMPONENT24,\n    \"depth24plus-stencil8\": gl.DEPTH24_STENCIL8,\n    depth32float: gl.DEPTH_COMPONENT32F,\n    \"depth32float-stencil8\": gl.DEPTH32F_STENCIL8,\n    // Compressed formats\n    ...extensions.s3tc ? {\n      \"bc1-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.s3tc_sRGB ? {\n      \"bc1-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.rgtc ? {\n      \"bc4-r-unorm\": extensions.rgtc.COMPRESSED_RED_RGTC1_EXT,\n      \"bc4-r-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,\n      \"bc5-rg-unorm\": extensions.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,\n      \"bc5-rg-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT\n    } : {},\n    ...extensions.bptc ? {\n      \"bc6h-rgb-float\": extensions.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,\n      \"bc6h-rgb-ufloat\": extensions.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,\n      \"bc7-rgba-unorm\": extensions.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,\n      \"bc7-rgba-unorm-srgb\": extensions.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT\n    } : {},\n    ...extensions.etc ? {\n      \"etc2-rgb8unorm\": extensions.etc.COMPRESSED_RGB8_ETC2,\n      \"etc2-rgb8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ETC2,\n      \"etc2-rgb8a1unorm\": extensions.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgb8a1unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgba8unorm\": extensions.etc.COMPRESSED_RGBA8_ETC2_EAC,\n      \"etc2-rgba8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,\n      \"eac-r11unorm\": extensions.etc.COMPRESSED_R11_EAC,\n      // 'eac-r11snorm'\n      \"eac-rg11unorm\": extensions.etc.COMPRESSED_SIGNED_RG11_EAC\n      // 'eac-rg11snorm'\n    } : {},\n    ...extensions.astc ? {\n      \"astc-4x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,\n      \"astc-4x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,\n      \"astc-5x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,\n      \"astc-5x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,\n      \"astc-5x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,\n      \"astc-5x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,\n      \"astc-6x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,\n      \"astc-6x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,\n      \"astc-6x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,\n      \"astc-6x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,\n      \"astc-8x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,\n      \"astc-8x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,\n      \"astc-8x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,\n      \"astc-8x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,\n      \"astc-8x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,\n      \"astc-8x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,\n      \"astc-10x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,\n      \"astc-10x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,\n      \"astc-10x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,\n      \"astc-10x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,\n      \"astc-10x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,\n      \"astc-10x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,\n      \"astc-10x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,\n      \"astc-10x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,\n      \"astc-12x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,\n      \"astc-12x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,\n      \"astc-12x12-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,\n      \"astc-12x12-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR\n    } : {}\n  };\n}\n\nexport { mapFormatToGlInternalFormat };\n//# sourceMappingURL=mapFormatToGlInternalFormat.mjs.map\n","\"use strict\";\nfunction mapFormatToGlType(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.UNSIGNED_BYTE,\n    r8snorm: gl.BYTE,\n    r8uint: gl.UNSIGNED_BYTE,\n    r8sint: gl.BYTE,\n    // 16-bit formats\n    r16uint: gl.UNSIGNED_SHORT,\n    r16sint: gl.SHORT,\n    r16float: gl.HALF_FLOAT,\n    rg8unorm: gl.UNSIGNED_BYTE,\n    rg8snorm: gl.BYTE,\n    rg8uint: gl.UNSIGNED_BYTE,\n    rg8sint: gl.BYTE,\n    // 32-bit formats\n    r32uint: gl.UNSIGNED_INT,\n    r32sint: gl.INT,\n    r32float: gl.FLOAT,\n    rg16uint: gl.UNSIGNED_SHORT,\n    rg16sint: gl.SHORT,\n    rg16float: gl.HALF_FLOAT,\n    rgba8unorm: gl.UNSIGNED_BYTE,\n    \"rgba8unorm-srgb\": gl.UNSIGNED_BYTE,\n    // Packed 32-bit formats\n    rgba8snorm: gl.BYTE,\n    rgba8uint: gl.UNSIGNED_BYTE,\n    rgba8sint: gl.BYTE,\n    bgra8unorm: gl.UNSIGNED_BYTE,\n    \"bgra8unorm-srgb\": gl.UNSIGNED_BYTE,\n    rgb9e5ufloat: gl.UNSIGNED_INT_5_9_9_9_REV,\n    rgb10a2unorm: gl.UNSIGNED_INT_2_10_10_10_REV,\n    rg11b10ufloat: gl.UNSIGNED_INT_10F_11F_11F_REV,\n    // 64-bit formats\n    rg32uint: gl.UNSIGNED_INT,\n    rg32sint: gl.INT,\n    rg32float: gl.FLOAT,\n    rgba16uint: gl.UNSIGNED_SHORT,\n    rgba16sint: gl.SHORT,\n    rgba16float: gl.HALF_FLOAT,\n    // 128-bit formats\n    rgba32uint: gl.UNSIGNED_INT,\n    rgba32sint: gl.INT,\n    rgba32float: gl.FLOAT,\n    // Depth/stencil formats\n    stencil8: gl.UNSIGNED_BYTE,\n    depth16unorm: gl.UNSIGNED_SHORT,\n    depth24plus: gl.UNSIGNED_INT,\n    \"depth24plus-stencil8\": gl.UNSIGNED_INT_24_8,\n    depth32float: gl.FLOAT,\n    \"depth32float-stencil8\": gl.FLOAT_32_UNSIGNED_INT_24_8_REV\n  };\n}\n\nexport { mapFormatToGlType };\n//# sourceMappingURL=mapFormatToGlType.mjs.map\n","\"use strict\";\nfunction mapViewDimensionToGlTarget(gl) {\n  return {\n    \"2d\": gl.TEXTURE_2D,\n    cube: gl.TEXTURE_CUBE_MAP,\n    \"1d\": null,\n    // WebGL2 only\n    \"3d\": gl?.TEXTURE_3D || null,\n    \"2d-array\": gl?.TEXTURE_2D_ARRAY || null,\n    \"cube-array\": gl?.TEXTURE_CUBE_MAP_ARRAY || null\n  };\n}\n\nexport { mapViewDimensionToGlTarget };\n//# sourceMappingURL=mapViewDimensionToGlTarget.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash.mjs';\nimport { Texture } from '../../shared/texture/Texture.mjs';\nimport { GlTexture } from './GlTexture.mjs';\nimport { glUploadBufferImageResource } from './uploaders/glUploadBufferImageResource.mjs';\nimport { glUploadCompressedTextureResource } from './uploaders/glUploadCompressedTextureResource.mjs';\nimport { createGlUploadCubeTextureResource } from './uploaders/glUploadCubeTextureResource.mjs';\nimport { glUploadImageResource } from './uploaders/glUploadImageResource.mjs';\nimport { glUploadVideoResource } from './uploaders/glUploadVideoResource.mjs';\nimport { applyStyleParams } from './utils/applyStyleParams.mjs';\nimport { mapFormatToGlFormat } from './utils/mapFormatToGlFormat.mjs';\nimport { mapFormatToGlInternalFormat } from './utils/mapFormatToGlInternalFormat.mjs';\nimport { mapFormatToGlType } from './utils/mapFormatToGlType.mjs';\nimport { mapViewDimensionToGlTarget } from './utils/mapViewDimensionToGlTarget.mjs';\nimport './utils/unpremultiplyAlpha.mjs';\n\n\"use strict\";\nconst BYTES_PER_PIXEL = 4;\nclass GlTextureSystem {\n  constructor(renderer) {\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundTextures = [];\n    this._activeTextureLocation = -1;\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    this._premultiplyAlpha = false;\n    // TODO - separate samplers will be a cool thing to add, but not right now!\n    this._useSeparateSamplers = false;\n    this._renderer = renderer;\n    this._managedTextures = new GCManagedHash({\n      renderer,\n      type: \"resource\",\n      onUnload: this.onSourceUnload.bind(this),\n      name: \"glTexture\"\n    });\n    const baseUploaders = {\n      image: glUploadImageResource,\n      buffer: glUploadBufferImageResource,\n      video: glUploadVideoResource,\n      compressed: glUploadCompressedTextureResource\n    };\n    this._uploads = {\n      ...baseUploaders,\n      cube: createGlUploadCubeTextureResource(baseUploaders)\n    };\n  }\n  /**\n   * @deprecated since 8.15.0\n   */\n  get managedTextures() {\n    return Object.values(this._managedTextures.items);\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    if (!this._mapFormatToInternalFormat) {\n      this._mapFormatToInternalFormat = mapFormatToGlInternalFormat(gl, this._renderer.context.extensions);\n      this._mapFormatToType = mapFormatToGlType(gl);\n      this._mapFormatToFormat = mapFormatToGlFormat(gl);\n      this._mapViewDimensionToGlTarget = mapViewDimensionToGlTarget(gl);\n    }\n    this._managedTextures.removeAll(true);\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    this._premultiplyAlpha = false;\n    for (let i = 0; i < 16; i++) {\n      this.bind(Texture.EMPTY, i);\n    }\n  }\n  /**\n   * Initializes a texture source, if it has already been initialized nothing will happen.\n   * @param source - The texture source to initialize.\n   * @returns The initialized texture source.\n   */\n  initSource(source) {\n    this.bind(source);\n  }\n  bind(texture, location = 0) {\n    const source = texture.source;\n    if (texture) {\n      this.bindSource(source, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(source.style, location);\n      }\n    } else {\n      this.bindSource(null, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(null, location);\n      }\n    }\n  }\n  bindSource(source, location = 0) {\n    const gl = this._gl;\n    source._gcLastUsed = this._renderer.gc.now;\n    if (this._boundTextures[location] !== source) {\n      this._boundTextures[location] = source;\n      this._activateLocation(location);\n      source || (source = Texture.EMPTY.source);\n      const glTexture = this.getGlSource(source);\n      gl.bindTexture(glTexture.target, glTexture.texture);\n    }\n  }\n  _bindSampler(style, location = 0) {\n    const gl = this._gl;\n    if (!style) {\n      this._boundSamplers[location] = null;\n      gl.bindSampler(location, null);\n      return;\n    }\n    const sampler = this._getGlSampler(style);\n    if (this._boundSamplers[location] !== sampler) {\n      this._boundSamplers[location] = sampler;\n      gl.bindSampler(location, sampler);\n    }\n  }\n  unbind(texture) {\n    const source = texture.source;\n    const boundTextures = this._boundTextures;\n    const gl = this._gl;\n    for (let i = 0; i < boundTextures.length; i++) {\n      if (boundTextures[i] === source) {\n        this._activateLocation(i);\n        const glTexture = this.getGlSource(source);\n        gl.bindTexture(glTexture.target, null);\n        boundTextures[i] = null;\n      }\n    }\n  }\n  _activateLocation(location) {\n    if (this._activeTextureLocation !== location) {\n      this._activeTextureLocation = location;\n      this._gl.activeTexture(this._gl.TEXTURE0 + location);\n    }\n  }\n  _initSource(source) {\n    const gl = this._gl;\n    const glTexture = new GlTexture(gl.createTexture());\n    glTexture.type = this._mapFormatToType[source.format];\n    glTexture.internalFormat = this._mapFormatToInternalFormat[source.format];\n    glTexture.format = this._mapFormatToFormat[source.format];\n    glTexture.target = this._mapViewDimensionToGlTarget[source.viewDimension];\n    if (glTexture.target === null) {\n      throw new Error(`Unsupported view dimension: ${source.viewDimension} with this webgl version: ${this._renderer.context.webGLVersion}`);\n    }\n    if (source.uploadMethodId === \"cube\") {\n      glTexture.target = gl.TEXTURE_CUBE_MAP;\n    }\n    if (source.autoGenerateMipmaps && (this._renderer.context.supports.nonPowOf2mipmaps || source.isPowerOfTwo)) {\n      const biggestDimension = Math.max(source.width, source.height);\n      source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n    }\n    source._gpuData[this._renderer.uid] = glTexture;\n    const added = this._managedTextures.add(source);\n    if (added) {\n      source.on(\"update\", this.onSourceUpdate, this);\n      source.on(\"resize\", this.onSourceUpdate, this);\n      source.on(\"styleChange\", this.onStyleChange, this);\n      source.on(\"updateMipmaps\", this.onUpdateMipmaps, this);\n    }\n    this.onSourceUpdate(source);\n    this.updateStyle(source, false);\n    return glTexture;\n  }\n  onStyleChange(source) {\n    this.updateStyle(source, false);\n  }\n  updateStyle(source, firstCreation) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(glTexture.target, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    applyStyleParams(\n      source.style,\n      gl,\n      source.mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"texParameteri\",\n      glTexture.target,\n      // will force a clamp to edge if the texture is not a power of two\n      !this._renderer.context.supports.nonPowOf2wrapping && !source.isPowerOfTwo,\n      firstCreation\n    );\n  }\n  onSourceUnload(source, contextLost = false) {\n    const glTexture = source._gpuData[this._renderer.uid];\n    if (!glTexture) return;\n    if (!contextLost) {\n      this.unbind(source);\n      this._gl.deleteTexture(glTexture.texture);\n    }\n    source.off(\"update\", this.onSourceUpdate, this);\n    source.off(\"resize\", this.onSourceUpdate, this);\n    source.off(\"styleChange\", this.onStyleChange, this);\n    source.off(\"updateMipmaps\", this.onUpdateMipmaps, this);\n  }\n  onSourceUpdate(source) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(glTexture.target, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    const premultipliedAlpha = source.alphaMode === \"premultiply-alpha-on-upload\";\n    if (this._premultiplyAlpha !== premultipliedAlpha) {\n      this._premultiplyAlpha = premultipliedAlpha;\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultipliedAlpha);\n    }\n    if (this._uploads[source.uploadMethodId]) {\n      this._uploads[source.uploadMethodId].upload(source, glTexture, gl, this._renderer.context.webGLVersion);\n    } else if (glTexture.target === gl.TEXTURE_2D) {\n      this._initEmptyTexture2D(glTexture, source);\n    } else if (glTexture.target === gl.TEXTURE_2D_ARRAY) {\n      this._initEmptyTexture2DArray(glTexture, source);\n    } else if (glTexture.target === gl.TEXTURE_CUBE_MAP) {\n      this._initEmptyTextureCube(glTexture, source);\n    } else {\n      throw new Error(\"[GlTextureSystem] Unsupported texture target for empty allocation.\");\n    }\n    this._applyMipRange(glTexture, source);\n    if (source.autoGenerateMipmaps && source.mipLevelCount > 1) {\n      this.onUpdateMipmaps(source, false);\n    }\n  }\n  onUpdateMipmaps(source, bind = true) {\n    if (bind) this.bindSource(source, 0);\n    const glTexture = this.getGlSource(source);\n    this._gl.generateMipmap(glTexture.target);\n  }\n  _initEmptyTexture2D(glTexture, source) {\n    const gl = this._gl;\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      glTexture.internalFormat,\n      source.pixelWidth,\n      source.pixelHeight,\n      0,\n      glTexture.format,\n      glTexture.type,\n      null\n    );\n    let w = Math.max(source.pixelWidth >> 1, 1);\n    let h = Math.max(source.pixelHeight >> 1, 1);\n    for (let level = 1; level < source.mipLevelCount; level++) {\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        level,\n        glTexture.internalFormat,\n        w,\n        h,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n      w = Math.max(w >> 1, 1);\n      h = Math.max(h >> 1, 1);\n    }\n  }\n  _initEmptyTexture2DArray(glTexture, source) {\n    if (this._renderer.context.webGLVersion !== 2) {\n      throw new Error(\"[GlTextureSystem] TEXTURE_2D_ARRAY requires WebGL2.\");\n    }\n    const gl2 = this._gl;\n    const depth = Math.max(source.arrayLayerCount | 0, 1);\n    gl2.texImage3D(\n      gl2.TEXTURE_2D_ARRAY,\n      0,\n      glTexture.internalFormat,\n      source.pixelWidth,\n      source.pixelHeight,\n      depth,\n      0,\n      glTexture.format,\n      glTexture.type,\n      null\n    );\n    let w = Math.max(source.pixelWidth >> 1, 1);\n    let h = Math.max(source.pixelHeight >> 1, 1);\n    for (let level = 1; level < source.mipLevelCount; level++) {\n      gl2.texImage3D(\n        gl2.TEXTURE_2D_ARRAY,\n        level,\n        glTexture.internalFormat,\n        w,\n        h,\n        depth,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n      w = Math.max(w >> 1, 1);\n      h = Math.max(h >> 1, 1);\n    }\n  }\n  _initEmptyTextureCube(glTexture, source) {\n    const gl = this._gl;\n    const totalCubeFaces = 6;\n    for (let face = 0; face < totalCubeFaces; face++) {\n      gl.texImage2D(\n        gl.TEXTURE_CUBE_MAP_POSITIVE_X + face,\n        0,\n        glTexture.internalFormat,\n        source.pixelWidth,\n        source.pixelHeight,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n    }\n    let w = Math.max(source.pixelWidth >> 1, 1);\n    let h = Math.max(source.pixelHeight >> 1, 1);\n    for (let level = 1; level < source.mipLevelCount; level++) {\n      for (let face = 0; face < totalCubeFaces; face++) {\n        gl.texImage2D(\n          gl.TEXTURE_CUBE_MAP_POSITIVE_X + face,\n          level,\n          glTexture.internalFormat,\n          w,\n          h,\n          0,\n          glTexture.format,\n          glTexture.type,\n          null\n        );\n      }\n      w = Math.max(w >> 1, 1);\n      h = Math.max(h >> 1, 1);\n    }\n  }\n  /**\n   * Applies a mip range to the currently-bound texture so WebGL2 considers the texture \"mipmap complete\"\n   * for the declared `mipLevelCount` (especially important for partial mip chains rendered via FBO).\n   * @param glTexture - The GL texture wrapper.\n   * @param source - The texture source describing mipLevelCount.\n   */\n  _applyMipRange(glTexture, source) {\n    if (this._renderer.context.webGLVersion !== 2) return;\n    const gl = this._gl;\n    const maxLevel = Math.max((source.mipLevelCount | 0) - 1, 0);\n    gl.texParameteri(glTexture.target, gl.TEXTURE_BASE_LEVEL, 0);\n    gl.texParameteri(glTexture.target, gl.TEXTURE_MAX_LEVEL, maxLevel);\n  }\n  _initSampler(style) {\n    const gl = this._gl;\n    const glSampler = this._gl.createSampler();\n    this._glSamplers[style._resourceId] = glSampler;\n    applyStyleParams(\n      style,\n      gl,\n      this._boundTextures[this._activeTextureLocation].mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"samplerParameteri\",\n      glSampler,\n      false,\n      true\n    );\n    return this._glSamplers[style._resourceId];\n  }\n  _getGlSampler(sampler) {\n    return this._glSamplers[sampler._resourceId] || this._initSampler(sampler);\n  }\n  getGlSource(source) {\n    source._gcLastUsed = this._renderer.gc.now;\n    return source._gpuData[this._renderer.uid] || this._initSource(source);\n  }\n  generateCanvas(texture) {\n    const { pixels, width, height } = this.getPixels(texture);\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      const imageData = ctx.createImageData(width, height);\n      imageData.data.set(pixels);\n      ctx.putImageData(imageData, 0, 0);\n    }\n    return canvas;\n  }\n  getPixels(texture) {\n    const resolution = texture.source.resolution;\n    const frame = texture.frame;\n    const width = Math.max(Math.round(frame.width * resolution), 1);\n    const height = Math.max(Math.round(frame.height * resolution), 1);\n    const pixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\n    const renderer = this._renderer;\n    const renderTarget = renderer.renderTarget.getRenderTarget(texture);\n    const glRenterTarget = renderer.renderTarget.getGpuRenderTarget(renderTarget);\n    const gl = renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenterTarget.resolveTargetFramebuffer);\n    gl.readPixels(\n      Math.round(frame.x * resolution),\n      Math.round(frame.y * resolution),\n      width,\n      height,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      pixels\n    );\n    if (false) {\n      unpremultiplyAlpha(pixels);\n    }\n    return { pixels: new Uint8ClampedArray(pixels.buffer), width, height };\n  }\n  destroy() {\n    this._managedTextures.destroy();\n    this._glSamplers = null;\n    this._boundTextures = null;\n    this._boundSamplers = null;\n    this._mapFormatToInternalFormat = null;\n    this._mapFormatToType = null;\n    this._mapFormatToFormat = null;\n    this._uploads = null;\n    this._renderer = null;\n  }\n  resetState() {\n    this._activeTextureLocation = -1;\n    this._boundTextures.fill(Texture.EMPTY.source);\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    const gl = this._gl;\n    this._premultiplyAlpha = false;\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha);\n  }\n}\n/** @ignore */\nGlTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"texture\"\n};\n\nexport { GlTextureSystem };\n//# sourceMappingURL=GlTextureSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GlGraphicsAdaptor {\n  contextChange(renderer) {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    const maxTextures = renderer.limits.maxBatchableTextures;\n    const glProgram = compileHighShaderGlProgram({\n      name: \"graphics\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        localUniformBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this.shader = new Shader({\n      glProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n  execute(graphicsPipe, renderable) {\n    const context = renderable.context;\n    const shader = context.customShader || this.shader;\n    const renderer = graphicsPipe.renderer;\n    const contextSystem = renderer.graphicsContext;\n    const {\n      batcher,\n      instructions\n    } = contextSystem.getContextRenderData(context);\n    shader.groups[0] = renderer.globalUniforms.bindGroup;\n    renderer.state.set(graphicsPipe.state);\n    renderer.shader.bind(shader);\n    renderer.geometry.bind(batcher.geometry, shader.glProgram);\n    const batches = instructions.instructions;\n    for (let i = 0; i < instructions.instructionSize; i++) {\n      const batch = batches[i];\n      if (batch.size) {\n        for (let j = 0; j < batch.textures.count; j++) {\n          renderer.texture.bind(batch.textures.textures[j], j);\n        }\n        renderer.geometry.draw(batch.topology, batch.size, batch.start);\n      }\n    }\n  }\n  destroy() {\n    this.shader.destroy(true);\n    this.shader = null;\n  }\n}\n/** @ignore */\nGlGraphicsAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"graphics\"\n};\n\nexport { GlGraphicsAdaptor };\n//# sourceMappingURL=GlGraphicsAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { textureBitGl } from '../../../rendering/high-shader/shader-bits/textureBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nclass GlMeshAdaptor {\n  init() {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"mesh\",\n      bits: [\n        localUniformBitGl,\n        textureBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this._shader = new Shader({\n      glProgram,\n      resources: {\n        uTexture: Texture.EMPTY.source,\n        textureUniforms: {\n          uTextureMatrix: { type: \"mat3x3<f32>\", value: new Matrix() }\n        }\n      }\n    });\n  }\n  execute(meshPipe, mesh) {\n    const renderer = meshPipe.renderer;\n    let shader = mesh._shader;\n    if (!shader) {\n      shader = this._shader;\n      const texture = mesh.texture;\n      const source = texture.source;\n      shader.resources.uTexture = source;\n      shader.resources.uSampler = source.style;\n      shader.resources.textureUniforms.uniforms.uTextureMatrix = texture.textureMatrix.mapCoord;\n    } else if (!shader.glProgram) {\n      warn(\"Mesh shader has no glProgram\", mesh.shader);\n      return;\n    }\n    shader.groups[100] = renderer.globalUniforms.bindGroup;\n    shader.groups[101] = meshPipe.localUniformsBindGroup;\n    renderer.encoder.draw({\n      geometry: mesh._geometry,\n      shader,\n      state: mesh.state\n    });\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\nGlMeshAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"mesh\"\n};\n\nexport { GlMeshAdaptor };\n//# sourceMappingURL=GlMeshAdaptor.mjs.map\n","import { extensions, ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GlGraphicsAdaptor } from '../../../scene/graphics/gl/GlGraphicsAdaptor.mjs';\nimport { GlMeshAdaptor } from '../../../scene/mesh/gl/GlMeshAdaptor.mjs';\nimport { GlBatchAdaptor } from '../../batcher/gl/GlBatchAdaptor.mjs';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer.mjs';\nimport { SharedSystems, SharedRenderPipes } from '../shared/system/SharedSystems.mjs';\nimport { RendererType } from '../types.mjs';\nimport { GlBufferSystem } from './buffer/GlBufferSystem.mjs';\nimport { GlContextSystem } from './context/GlContextSystem.mjs';\nimport { GlGeometrySystem } from './geometry/GlGeometrySystem.mjs';\nimport { GlBackBufferSystem } from './GlBackBufferSystem.mjs';\nimport { GlColorMaskSystem } from './GlColorMaskSystem.mjs';\nimport { GlEncoderSystem } from './GlEncoderSystem.mjs';\nimport { GlLimitsSystem } from './GlLimitsSystem.mjs';\nimport { GlStencilSystem } from './GlStencilSystem.mjs';\nimport { GlUboSystem } from './GlUboSystem.mjs';\nimport { GlRenderTargetSystem } from './renderTarget/GlRenderTargetSystem.mjs';\nimport { GlShaderSystem } from './shader/GlShaderSystem.mjs';\nimport { GlUniformGroupSystem } from './shader/GlUniformGroupSystem.mjs';\nimport { GlStateSystem } from './state/GlStateSystem.mjs';\nimport { GlTextureSystem } from './texture/GlTextureSystem.mjs';\n\n\"use strict\";\nconst DefaultWebGLSystems = [\n  ...SharedSystems,\n  GlUboSystem,\n  GlBackBufferSystem,\n  GlContextSystem,\n  GlLimitsSystem,\n  GlBufferSystem,\n  GlTextureSystem,\n  GlRenderTargetSystem,\n  GlGeometrySystem,\n  GlUniformGroupSystem,\n  GlShaderSystem,\n  GlEncoderSystem,\n  GlStateSystem,\n  GlStencilSystem,\n  GlColorMaskSystem\n];\nconst DefaultWebGLPipes = [...SharedRenderPipes];\nconst DefaultWebGLAdapters = [GlBatchAdaptor, GlMeshAdaptor, GlGraphicsAdaptor];\nconst systems = [];\nconst renderPipes = [];\nconst renderPipeAdaptors = [];\nextensions.handleByNamedList(ExtensionType.WebGLSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGLPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGLPipesAdaptor, renderPipeAdaptors);\nextensions.add(...DefaultWebGLSystems, ...DefaultWebGLPipes, ...DefaultWebGLAdapters);\nclass WebGLRenderer extends AbstractRenderer {\n  constructor() {\n    const systemConfig = {\n      name: \"webgl\",\n      type: RendererType.WEBGL,\n      systems,\n      renderPipes,\n      renderPipeAdaptors\n    };\n    super(systemConfig);\n  }\n}\n\nexport { WebGLRenderer };\n//# sourceMappingURL=WebGLRenderer.mjs.map\n"],"names":["isSafari","userAgent","DOMAdapter","GlBatchAdaptor","State","batcherPipe","batchPipe","geometry","shader","renderer","didUpload","batch","textures","ExtensionType","BUFFER_TYPE","BUFFER_TYPE2","GlBuffer","buffer","type","GlBufferSystem","GCManagedHash","gl","glBuffer","index","hasTransformFeedback","freeIndex","loop","nextIndex","curBuf","offset","size","data","drawType","BufferUsage","contextLost","_GlContextSystem","options","multiView","warn","alpha","premultipliedAlpha","antialias","targetCanvas","canvas","element","preferWebGLVersion","common","provokeExt","event","attributes","supports","isWebGl2","extensions","GlContextSystem","GL_FORMATS","GL_FORMATS2","GL_TARGETS","GL_TARGETS2","GL_TYPES","GL_TYPES2","infoMap","getGlTypeFromFormat","format","topologyToGlMap","GlGeometryGpuData","GlGeometrySystem","nativeVaoExtension","vao","nativeInstancedExtension","a","b","c","d","e","program","bufferSystem","i","geometryAttributes","shaderAttributes","j","attribs","strings","_incRefCount","signature","gpuData","vaoObjectHash","ensureAttributes","buffers","vaoCache","lastBuffer","attribute","programAttrib","location","attributeInfo","getAttributeInfoFromFormat","divisor","topology","start","instanceCount","glTopology","byteSize","glType","bigTriangleGeometry","Geometry","_GlBackBufferSystem","useBackBuffer","bigTriangleProgram","GlProgram","Shader","Texture","renderTarget","renderTarget2","targetSourceTexture","TextureSource","GlBackBufferSystem","GlColorMaskSystem","colorMask","GlEncoderSystem","state","skipSync","GlLimitsSystem","checkMaxIfStatementsInShader","GlRenderTarget","GlStencilSystem","STENCIL_MODES","stencilState","stencilMode","stencilReference","mode","GpuStencilModesToPixi","_stencilCache","WGSL_TO_STD40_SIZE","createUboElementsSTD40","uniformData","uboElements","chunkSize","uboElement","boundary","curOffset","generateArraySyncSTD40","offsetToAdd","rowSize","elementSize","remainder","createUboSyncFunctionSTD40","createUboSyncFunction","uboSyncFunctionsSTD40","GlUboSystem","UboSystem","GlRenderTargetAdaptor","Rectangle","renderTargetSystem","_","sourceRenderSurfaceTexture","destinationTexture","originSrc","originDest","glRenderTarget","clear","clearColor","viewport","mipLevel","layer","source","gpuRenderTarget","viewPortY","texture","colorTexture","glSource","viewPortCache","CanvasSource","renderBuffer","_renderTarget","_viewport","_mipLevel","CLEAR","clearColorCache","clearColorArray","resolveTargetFramebuffer","glTexture","viewFramebuffer","msaaRenderBuffer","source2","glInternalFormat","depthStencilRenderBuffer","resource","contextCanvas","canvasSource","count","bufferArray","ext","GlRenderTargetSystem","RenderTargetSystem","generateShaderSyncCode","shaderSystem","funcFragments","headerFragments","addedTextreSystem","textureCount","programData","group","UniformGroup","resName","BufferResource","uniformName","functionSource","GlProgramData","compileShader","src","booleanArray","array","defaultValue","GL_TABLE","GL_TO_GLSL_TYPES","GLSL_TO_VERTEX_TYPES","mapType","typeNames","tn","mapGlToVertexFormat","typeValue","extractAttributesFromGlProgram","sortAttributes","totalAttributes","attribData","keys","getUboData","uniformBlocks","totalUniformsBlocks","name","uniformBlockIndex","getUniformData","uniforms","totalUniforms","isArray","logPrettyShaderError","shaderSrc","line","shaderLog","splitShader","dedupe","lineNumbers","n","logArgs","number","fragmentSourceToLog","logProgramError","vertexShader","fragmentShader","generateProgram","glVertShader","glFragShader","webGLProgram","transformFeedbackVaryings","defaultSyncData","GlShaderSystem","syncFunction","uniformGroup","isBufferResource","boundLocation","key","UNIFORM_TO_SINGLE_SETTERS","UNIFORM_TO_ARRAY_SETTERS","generateUniformsSync","uniform","parsed","uniformParsers","parser","template","GlUniformGroupSystem","syncData","uniformGroupSyncHash","id","preFix","mapWebGLBlendModesToPixi","blendMap","BLEND","OFFSET","CULLING","DEPTH_TEST","WINDING","DEPTH_MASK","_GlStateSystem","diff","value","faceMode","scale","func","system","GlStateSystem","GlTexture","glUploadBufferImageResource","_webGLVersion","targetOverride","forceAllocation","target","compressedFormatMap","glUploadCompressedTextureResource","_forceAllocation","mipWidth","mipHeight","compressed","levelBuffer","FACE_ORDER","createGlUploadCubeTextureResource","uploaders","webGLVersion","faces","faceIndex","face","glUploadImageResource","textureWidth","textureHeight","resourceWidth","resourceHeight","isWebGL2","needsAllocation","resourceFitsTexture","uploadImageWebGL2","uploadImageWebGL1","_resourceWidth","_resourceHeight","defaultForceAllocation","glUploadVideoResource","scaleModeToGlFilter","mipmapScaleModeToGlFilter","wrapModeToGlAddress","compareModeToGlCompare","applyStyleParams","style","mipmaps","anisotropicExt","glFunctionName","firstParam","forceClamp","firstCreation","castParam","wrapModeS","wrapModeT","wrapModeR","glFilterMode","level","mapFormatToGlFormat","mapFormatToGlInternalFormat","srgb","bgra8unorm","mapFormatToGlType","mapViewDimensionToGlTarget","BYTES_PER_PIXEL","GlTextureSystem","baseUploaders","sampler","boundTextures","biggestDimension","bind","w","h","gl2","depth","totalCubeFaces","maxLevel","glSampler","pixels","width","height","ctx","imageData","resolution","frame","glRenterTarget","GlGraphicsAdaptor","Matrix","maxTextures","glProgram","compileHighShaderGlProgram","colorBitGl","generateTextureBatchBitGl","localUniformBitGl","roundPixelsBitGl","getBatchSamplersUniformGroup","graphicsPipe","renderable","context","contextSystem","batcher","instructions","batches","GlMeshAdaptor","textureBitGl","meshPipe","mesh","DefaultWebGLSystems","SharedSystems","DefaultWebGLPipes","SharedRenderPipes","DefaultWebGLAdapters","systems","renderPipes","renderPipeAdaptors","WebGLRenderer","AbstractRenderer","systemConfig","RendererType"],"mappings":"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M,GAAkBxS,EAAIiR,EAAQnH,EAAWmI,EAAcC,EAAeC,EAAeC,EAAgBhI,EAAUkI,EAAiBC,EAAqB,CAC5J,GAAI,CAACA,EAAqB,CACpBD,GACFtS,EAAG,WACDiR,EACA,EACAnH,EAAU,eACVmI,EACAC,EACA,EACApI,EAAU,OACVA,EAAU,KACV,IACR,EAEI9J,EAAG,cACDiR,EACA,EACA,EACA,EACAkB,EACAC,EACAtI,EAAU,OACVA,EAAU,KACVM,CACN,EACI,MACF,CACA,GAAI,CAACkI,EAAiB,CACpBtS,EAAG,cACDiR,EACA,EACA,EACA,EACAnH,EAAU,OACVA,EAAU,KACVM,CACN,EACI,MACF,CACApK,EAAG,WACDiR,EACA,EACAnH,EAAU,eACVmI,EACAC,EACA,EACApI,EAAU,OACVA,EAAU,KACVM,CACJ,CACA,CACA,SAASqI,GAAkBzS,EAAIiR,EAAQnH,EAAWmI,EAAcC,EAAeQ,EAAgBC,EAAiBvI,EAAUkI,EAAiBC,EAAqB,CAC9J,GAAI,CAACA,EAAqB,CACpBD,GACFtS,EAAG,WACDiR,EACA,EACAnH,EAAU,eACVmI,EACAC,EACA,EACApI,EAAU,OACVA,EAAU,KACV,IACR,EAEI9J,EAAG,cACDiR,EACA,EACA,EACA,EACAnH,EAAU,OACVA,EAAU,KACVM,CACN,EACI,MACF,CACA,GAAI,CAACkI,EAAiB,CACpBtS,EAAG,cACDiR,EACA,EACA,EACA,EACAnH,EAAU,OACVA,EAAU,KACVM,CACN,EACI,MACF,CACApK,EAAG,WACDiR,EACA,EACAnH,EAAU,eACVA,EAAU,OACVA,EAAU,KACVM,CACJ,CACA,CC5HA,MAAMwI,GAAyBjU,GAAQ,EACjCkU,GAAwB,CAC5B,GAAI,QACJ,OAAO/J,EAAQgB,EAAW9J,EAAI4R,EAAcb,EAAgBC,EAAkB4B,GAAwB,CACpG,GAAI,CAAC9J,EAAO,QAAS,CACnB,MAAMmI,EAASF,GAAkBjH,EAAU,OAC3C9J,EAAG,WACDiR,EACA,EACAnH,EAAU,eACV,EACA,EACA,EACAA,EAAU,OACVA,EAAU,KACV,IACR,EACM,M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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52]}